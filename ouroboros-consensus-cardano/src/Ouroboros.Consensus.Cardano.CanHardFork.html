<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DataKinds                #-}</span><span>
</span><a name="line-2"></a><span class="hs-pragma">{-# LANGUAGE DeriveAnyClass           #-}</span><span>
</span><a name="line-3"></a><span class="hs-pragma">{-# LANGUAGE DeriveGeneric            #-}</span><span>
</span><a name="line-4"></a><span class="hs-pragma">{-# LANGUAGE DisambiguateRecordFields #-}</span><span>
</span><a name="line-5"></a><span class="hs-pragma">{-# LANGUAGE FlexibleInstances        #-}</span><span>
</span><a name="line-6"></a><span class="hs-pragma">{-# LANGUAGE LambdaCase               #-}</span><span>
</span><a name="line-7"></a><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns           #-}</span><span>
</span><a name="line-8"></a><span class="hs-pragma">{-# LANGUAGE OverloadedStrings        #-}</span><span>
</span><a name="line-9"></a><span class="hs-pragma">{-# LANGUAGE RecordWildCards          #-}</span><span>
</span><a name="line-10"></a><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables      #-}</span><span>
</span><a name="line-11"></a><span class="hs-pragma">{-# LANGUAGE TypeApplications         #-}</span><span>
</span><a name="line-12"></a><span class="hs-pragma">{-# LANGUAGE TypeFamilies             #-}</span><span>
</span><a name="line-13"></a><span class="hs-pragma">{-# OPTIONS_GHC -Wno-orphans #-}</span><span>
</span><a name="line-14"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Ouroboros.Consensus.Cardano.CanHardFork</span><span> </span><span class="hs-special">(</span><span>
</span><a name="line-15"></a><span>    </span><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#TriggerHardFork"><span class="hs-identifier hs-type">TriggerHardFork</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><a name="line-16"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#ByronPartialLedgerConfig"><span class="hs-identifier hs-type">ByronPartialLedgerConfig</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><a name="line-17"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#ShelleyPartialLedgerConfig"><span class="hs-identifier hs-type">ShelleyPartialLedgerConfig</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><a name="line-18"></a><span>    </span><span class="hs-comment">-- * Exported for testing purposes</span><span>
</span><a name="line-19"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#translateTxIdByronToShelley"><span class="hs-identifier hs-var">translateTxIdByronToShelley</span></a><span>
</span><a name="line-20"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#translateCompactTxOutByronToShelley"><span class="hs-identifier hs-var">translateCompactTxOutByronToShelley</span></a><span>
</span><a name="line-21"></a><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-22"></a><span>
</span><a name="line-23"></a><span class="hs-keyword">import</span><span>           </span><span class="hs-identifier">Control.Monad.Reader</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">runReader</span><span class="hs-special">)</span><span>
</span><a name="line-24"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">Data.Map.Strict</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">Map</span><span>
</span><a name="line-25"></a><span class="hs-keyword">import</span><span>           </span><span class="hs-identifier">Data.Maybe</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">mapMaybe</span><span class="hs-special">)</span><span>
</span><a name="line-26"></a><span class="hs-keyword">import</span><span>           </span><span class="hs-identifier">Data.Proxy</span><span>
</span><a name="line-27"></a><span class="hs-keyword">import</span><span>           </span><span class="hs-identifier">Data.Word</span><span>
</span><a name="line-28"></a><span class="hs-keyword">import</span><span>           </span><span class="hs-identifier">GHC.Generics</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Generic</span><span class="hs-special">)</span><span>
</span><a name="line-29"></a><span>
</span><a name="line-30"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-crypto-wrapper-1.3.0/noopt/doc/html/cardano-crypto-wrapper/src/Cardano.Crypto.Hashing.html"><span class="hs-identifier">Cardano.Crypto.Hashing</span></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">Hashing</span><span>
</span><a name="line-31"></a><span class="hs-keyword">import</span><span>           </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src/Cardano.Prelude.html"><span class="hs-identifier">Cardano.Prelude</span></a><span> </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src/Cardano.Prelude.GHC.Heap.NormalForm.Classy.html#NoUnexpectedThunks"><span class="hs-identifier hs-type">NoUnexpectedThunks</span></a><span class="hs-special">)</span><span>
</span><a name="line-32"></a><span>
</span><a name="line-33"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-ledger-0.1.0.0/noopt/doc/html/cardano-ledger/src/Cardano.Chain.Block.html"><span class="hs-identifier">Cardano.Chain.Block</span></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">CC</span><span>
</span><a name="line-34"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-ledger-0.1.0.0/noopt/doc/html/cardano-ledger/src/Cardano.Chain.Common.html"><span class="hs-identifier">Cardano.Chain.Common</span></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">CC</span><span>
</span><a name="line-35"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-ledger-0.1.0.0/noopt/doc/html/cardano-ledger/src/Cardano.Chain.Update.html"><span class="hs-identifier">Cardano.Chain.Update</span></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">CC.Update</span><span>
</span><a name="line-36"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-ledger-0.1.0.0/noopt/doc/html/cardano-ledger/src/Cardano.Chain.UTxO.html"><span class="hs-identifier">Cardano.Chain.UTxO</span></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">CC</span><span>
</span><a name="line-37"></a><span>
</span><a name="line-38"></a><span class="hs-keyword">import</span><span>           </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.Block.html"><span class="hs-identifier">Ouroboros.Consensus.Block</span></a><span>
</span><a name="line-39"></a><span class="hs-keyword">import</span><span>           </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.Ledger.Abstract.html"><span class="hs-identifier">Ouroboros.Consensus.Ledger.Abstract</span></a><span>
</span><a name="line-40"></a><span class="hs-keyword">import</span><span>           </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.TypeFamilyWrappers.html"><span class="hs-identifier">Ouroboros.Consensus.TypeFamilyWrappers</span></a><span>
</span><a name="line-41"></a><span>
</span><a name="line-42"></a><span class="hs-keyword">import</span><span>           </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.html"><span class="hs-identifier">Ouroboros.Consensus.HardFork.Combinator</span></a><span>
</span><a name="line-43"></a><span class="hs-keyword">import</span><span>           </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.State.Types.html"><span class="hs-identifier">Ouroboros.Consensus.HardFork.Combinator.State.Types</span></a><span>
</span><a name="line-44"></a><span class="hs-keyword">import</span><span>           </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.Util.InPairs.html"><span class="hs-identifier">Ouroboros.Consensus.HardFork.Combinator.Util.InPairs</span></a><span>
</span><a name="line-45"></a><span>                     </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.Util.InPairs.html#RequiringBoth"><span class="hs-identifier hs-type">RequiringBoth</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-46"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.Util.InPairs.html"><span class="hs-identifier">Ouroboros.Consensus.HardFork.Combinator.Util.InPairs</span></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">InPairs</span><span>
</span><a name="line-47"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.Util.Tails.html"><span class="hs-identifier">Ouroboros.Consensus.HardFork.Combinator.Util.Tails</span></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">Tails</span><span>
</span><a name="line-48"></a><span>
</span><a name="line-49"></a><span class="hs-keyword">import</span><span>           </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-byron-0.1.0.0/noopt/doc/html/ouroboros-consensus-byron/src/Ouroboros.Consensus.Byron.Ledger.html"><span class="hs-identifier">Ouroboros.Consensus.Byron.Ledger</span></a><span>
</span><a name="line-50"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-byron-0.1.0.0/noopt/doc/html/ouroboros-consensus-byron/src/Ouroboros.Consensus.Byron.Ledger.Inspect.html"><span class="hs-identifier">Ouroboros.Consensus.Byron.Ledger.Inspect</span></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">Byron.Inspect</span><span>
</span><a name="line-51"></a><span class="hs-keyword">import</span><span>           </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-byron-0.1.0.0/noopt/doc/html/ouroboros-consensus-byron/src/Ouroboros.Consensus.Byron.Node.html"><span class="hs-identifier">Ouroboros.Consensus.Byron.Node</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-52"></a><span class="hs-keyword">import</span><span>           </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.Protocol.PBFT.html"><span class="hs-identifier">Ouroboros.Consensus.Protocol.PBFT</span></a><span> </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.Protocol.PBFT.html#PBft"><span class="hs-identifier hs-type">PBft</span></a><span class="hs-special">,</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.Protocol.PBFT.Crypto.html#PBftCrypto"><span class="hs-identifier hs-type">PBftCrypto</span></a><span class="hs-special">)</span><span>
</span><a name="line-53"></a><span class="hs-keyword">import</span><span>           </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.Protocol.PBFT.State.html"><span class="hs-identifier">Ouroboros.Consensus.Protocol.PBFT.State</span></a><span> </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.Protocol.PBFT.State.html#PBftState"><span class="hs-identifier hs-type">PBftState</span></a><span class="hs-special">)</span><span>
</span><a name="line-54"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.Protocol.PBFT.State.html"><span class="hs-identifier">Ouroboros.Consensus.Protocol.PBFT.State</span></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">PBftState</span><span>
</span><a name="line-55"></a><span>
</span><a name="line-56"></a><span class="hs-keyword">import</span><span>           </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Ledger.html"><span class="hs-identifier">Ouroboros.Consensus.Shelley.Ledger</span></a><span>
</span><a name="line-57"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Ledger.History.html"><span class="hs-identifier">Ouroboros.Consensus.Shelley.Ledger.History</span></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">History</span><span>
</span><a name="line-58"></a><span class="hs-keyword">import</span><span>           </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Node.html"><span class="hs-identifier">Ouroboros.Consensus.Shelley.Node</span></a><span> </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.Genesis.html#ShelleyGenesis"><span class="hs-identifier hs-type">ShelleyGenesis</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-59"></a><span class="hs-keyword">import</span><span>           </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Protocol.html"><span class="hs-identifier">Ouroboros.Consensus.Shelley.Protocol</span></a><span>
</span><a name="line-60"></a><span class="hs-keyword">import</span><span>           </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Protocol.State.html"><span class="hs-identifier">Ouroboros.Consensus.Shelley.Protocol.State</span></a><span> </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Protocol.State.html#TPraosState"><span class="hs-identifier hs-type">TPraosState</span></a><span class="hs-special">)</span><span>
</span><a name="line-61"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Protocol.State.html"><span class="hs-identifier">Ouroboros.Consensus.Shelley.Protocol.State</span></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">TPraosState</span><span>
</span><a name="line-62"></a><span>
</span><a name="line-63"></a><span class="hs-keyword">import</span><span>           </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.Util.html"><span class="hs-identifier">Ouroboros.Consensus.Util</span></a><span> </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.Util.html#hashFromBytesE"><span class="hs-identifier hs-var">hashFromBytesE</span></a><span class="hs-special">)</span><span>
</span><a name="line-64"></a><span>
</span><a name="line-65"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.API.html"><span class="hs-identifier">Shelley.Spec.Ledger.API</span></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">SL</span><span>
</span><a name="line-66"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.BaseTypes.html"><span class="hs-identifier">Shelley.Spec.Ledger.BaseTypes</span></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">SL</span><span>
</span><a name="line-67"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.EpochBoundary.html"><span class="hs-identifier">Shelley.Spec.Ledger.EpochBoundary</span></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">SL</span><span>
</span><a name="line-68"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.LedgerState.html"><span class="hs-identifier">Shelley.Spec.Ledger.LedgerState</span></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">SL</span><span>
</span><a name="line-69"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.OverlaySchedule.html"><span class="hs-identifier">Shelley.Spec.Ledger.OverlaySchedule</span></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">SL</span><span>
</span><a name="line-70"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.Rewards.html"><span class="hs-identifier">Shelley.Spec.Ledger.Rewards</span></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">SL</span><span>
</span><a name="line-71"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.STS.Prtcl.html"><span class="hs-identifier">Shelley.Spec.Ledger.STS.Prtcl</span></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">SL</span><span>
</span><a name="line-72"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.STS.Tickn.html"><span class="hs-identifier">Shelley.Spec.Ledger.STS.Tickn</span></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">SL</span><span>
</span><a name="line-73"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.UTxO.html"><span class="hs-identifier">Shelley.Spec.Ledger.UTxO</span></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">SL</span><span>
</span><a name="line-74"></a><span>
</span><a name="line-75"></a><span class="hs-keyword">import</span><span>           </span><a href="Ouroboros.Consensus.Cardano.Block.html"><span class="hs-identifier">Ouroboros.Consensus.Cardano.Block</span></a><span>
</span><a name="line-76"></a><span>
</span><a name="line-77"></a><span class="hs-comment">{-------------------------------------------------------------------------------
  Figure out the transition point for Byron

  The Byron ledger defines the update 'State' in
  &quot;Cardano.Chain.Update.Validation.Interface&quot;. The critical piece of state we
  need is

  &gt; candidateProtocolUpdates :: ![CandidateProtocolUpdate]

  which are the update proposals that have been voted on, accepted, and
  endorsed, and now need to become stable. In `tryBumpVersion`
  (&quot;Cardano.Chain.Update.Validation.Interface.ProtocolVersionBump&quot;) we
  find the candidates that are at least 'kUpdateStabilityParam' (@== 4k@) deep,
  and then construct

  &gt; State
  &gt; { nextProtocolVersion    = cpuProtocolVersion
  &gt; , nextProtocolParameters = cpuProtocolParameters
  &gt; }

  (with 'State' from &quot;Cardano.Chain.Update.Validation.Interface.ProtocolVersionBump&quot;)
  where 'cpuProtocolVersion'/'cpuProtocolParameters' are the version and
  parameters from the update. This then ends up in the following callstack

  &gt; applyChainTick
  &gt; |
  &gt; \-- epochTransition
  &gt;     |
  &gt;     \-- registerEpoch
  &gt;         |
  &gt;         \-- tryBumpVersion

  Now, if this is changing the major version of the protocol, then this actually
  indicates the transition to Shelley, and the Byron 'applyChainTick' won't
  actually happen. Instead, in 'singleEraTransition' we will report the
  'EpochNo' of the transition as soon as it's @2k@ (not @4k@!) deep: in other
  words, as soon as it is stable; at this point, the HFC will do the rest.

  A slightly subtle point is that the Byron ledger does not record any
  information about /past/ updates to the protocol parameters, and so if we
  /were/ to ask the Byron ledger /after/ the update when the transition is
  going to take place (did take place), it will say 'Nothing': transition not
  yet known. In practice this won't matter, as it will have been translated to
  a Shelley ledger at that point.
-------------------------------------------------------------------------------}</span><span>
</span><a name="line-122"></a><span>
</span><a name="line-123"></a><span class="hs-identifier">byronTransition</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.PartialConfig.html#PartialLedgerConfig"><span class="hs-identifier hs-type">PartialLedgerConfig</span></a><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-byron-0.1.0.0/noopt/doc/html/ouroboros-consensus-byron/src/Ouroboros.Consensus.Byron.Ledger.Block.html#ByronBlock"><span class="hs-identifier hs-type">ByronBlock</span></a><span>
</span><a name="line-124"></a><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Word16</span><span>   </span><span class="hs-comment">-- ^ Shelley major protocol version</span><span>
</span><a name="line-125"></a><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.Ledger.Basics.html#LedgerState"><span class="hs-identifier hs-type">LedgerState</span></a><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-byron-0.1.0.0/noopt/doc/html/ouroboros-consensus-byron/src/Ouroboros.Consensus.Byron.Ledger.Block.html#ByronBlock"><span class="hs-identifier hs-type">ByronBlock</span></a><span>
</span><a name="line-126"></a><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-slotting-0.1.0.0/noopt/doc/html/cardano-slotting/src/Cardano.Slotting.Slot.html#EpochNo"><span class="hs-identifier hs-type">EpochNo</span></a><span>
</span><a name="line-127"></a><a name="byronTransition"><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#byronTransition"><span class="hs-identifier">byronTransition</span></a></a><span> </span><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#ByronPartialLedgerConfig"><span class="hs-identifier hs-var">ByronPartialLedgerConfig</span></a><span class="hs-special">{</span><span class="hs-glyph">..</span><span class="hs-special">}</span><span> </span><a name="local-6989586621679130968"><a href="#local-6989586621679130968"><span class="hs-identifier">shelleyMajorVersion</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-128"></a><span>      </span><a href="#local-6989586621679130970"><span class="hs-identifier hs-var">latest</span></a><span>
</span><a name="line-129"></a><span>    </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">mapMaybe</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-byron-0.1.0.0/noopt/doc/html/ouroboros-consensus-byron/src/Ouroboros.Consensus.Byron.Ledger.Inspect.html#isStableCandidate"><span class="hs-identifier hs-var">Byron.Inspect.isStableCandidate</span></a><span>
</span><a name="line-130"></a><span>    </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">filter</span><span> </span><a href="#local-6989586621679130969"><span class="hs-identifier hs-var">bumpsMajorProtocolVersion</span></a><span>
</span><a name="line-131"></a><span>    </span><span class="hs-operator hs-var">.</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-byron-0.1.0.0/noopt/doc/html/ouroboros-consensus-byron/src/Ouroboros.Consensus.Byron.Ledger.Inspect.html#protocolUpdates"><span class="hs-identifier hs-var">Byron.Inspect.protocolUpdates</span></a><span> </span><a href="#local-6989586621679130966"><span class="hs-identifier hs-var">byronLedgerConfig</span></a><span>
</span><a name="line-132"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-133"></a><span>    </span><span class="hs-identifier">bumpsMajorProtocolVersion</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-byron-0.1.0.0/noopt/doc/html/ouroboros-consensus-byron/src/Ouroboros.Consensus.Byron.Ledger.Inspect.html#ProtocolUpdate"><span class="hs-identifier hs-type">Byron.Inspect.ProtocolUpdate</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-134"></a><span>    </span><a name="local-6989586621679130969"><a href="#local-6989586621679130969"><span class="hs-identifier">bumpsMajorProtocolVersion</span></a></a><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-byron-0.1.0.0/noopt/doc/html/ouroboros-consensus-byron/src/Ouroboros.Consensus.Byron.Ledger.Inspect.html#ProtocolUpdate"><span class="hs-identifier hs-var">Byron.Inspect.ProtocolUpdate</span></a><span class="hs-special">{</span><span class="hs-glyph">..</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-135"></a><span>           </span><a href="#local-6989586621679130968"><span class="hs-identifier hs-var">shelleyMajorVersion</span></a><span>
</span><a name="line-136"></a><span>        </span><span class="hs-operator hs-var">==</span><span> </span><span class="hs-identifier">CC.Update.pvMajor</span><span> </span><a href="#local-6989586621679130976"><span class="hs-identifier hs-var">protocolUpdateVersion</span></a><span>
</span><a name="line-137"></a><span>
</span><a name="line-138"></a><span>    </span><span class="hs-comment">-- 'tryBumpVersion' assumes head of the list of stable proposals is the</span><span>
</span><a name="line-139"></a><span>    </span><span class="hs-comment">-- newest, so we do too</span><span>
</span><a name="line-140"></a><span>    </span><span class="hs-identifier">latest</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="#local-6989586621679130971"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679130971"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-141"></a><span>    </span><a name="local-6989586621679130970"><a href="#local-6989586621679130970"><span class="hs-identifier">latest</span></a></a><span> </span><span class="hs-special">(</span><a name="local-6989586621679134820"><a href="#local-6989586621679134820"><span class="hs-identifier">newest</span></a></a><span class="hs-glyph">:</span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><a href="#local-6989586621679134820"><span class="hs-identifier hs-var">newest</span></a><span>
</span><a name="line-142"></a><span>    </span><span class="hs-identifier">latest</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Nothing</span><span>
</span><a name="line-143"></a><span>
</span><a name="line-144"></a><span class="hs-comment">{-------------------------------------------------------------------------------
  SingleEraBlock Byron
-------------------------------------------------------------------------------}</span><span>
</span><a name="line-147"></a><span>
</span><a name="line-148"></a><span class="hs-keyword">instance</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.Abstract.SingleEraBlock.html#SingleEraBlock"><span class="hs-identifier hs-type">SingleEraBlock</span></a><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-byron-0.1.0.0/noopt/doc/html/ouroboros-consensus-byron/src/Ouroboros.Consensus.Byron.Ledger.Block.html#ByronBlock"><span class="hs-identifier hs-type">ByronBlock</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-149"></a><span>  </span><a name="local-8214565720323806381"><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.Abstract.SingleEraBlock.html#singleEraTransition"><span class="hs-identifier">singleEraTransition</span></a></a><span> </span><a name="local-6989586621679130947"><a href="#local-6989586621679130947"><span class="hs-identifier">pcfg</span></a></a><span> </span><a name="local-6989586621679130948"><a href="#local-6989586621679130948"><span class="hs-identifier">_eraParams</span></a></a><span> </span><a name="local-6989586621679130949"><a href="#local-6989586621679130949"><span class="hs-identifier">_eraStart</span></a></a><span> </span><a name="local-6989586621679130950"><a href="#local-6989586621679130950"><span class="hs-identifier">ledgerState</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-150"></a><span>      </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">triggerHardFork</span><span> </span><a href="#local-6989586621679130947"><span class="hs-identifier hs-var">pcfg</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-151"></a><span>        </span><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#TriggerHardForkNever"><span class="hs-identifier hs-var">TriggerHardForkNever</span></a><span>                         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">Nothing</span><span>
</span><a name="line-152"></a><span>        </span><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#TriggerHardForkAtEpoch"><span class="hs-identifier hs-var">TriggerHardForkAtEpoch</span></a><span>   </span><a name="local-6989586621679130951"><a href="#local-6989586621679130951"><span class="hs-identifier">epoch</span></a></a><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><a href="#local-6989586621679130951"><span class="hs-identifier hs-var">epoch</span></a><span>
</span><a name="line-153"></a><span>        </span><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#TriggerHardForkAtVersion"><span class="hs-identifier hs-var">TriggerHardForkAtVersion</span></a><span> </span><a name="local-6989586621679130952"><a href="#local-6989586621679130952"><span class="hs-identifier">shelleyMajorVersion</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-154"></a><span>            </span><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#byronTransition"><span class="hs-identifier hs-var">byronTransition</span></a><span>
</span><a name="line-155"></a><span>              </span><a href="#local-6989586621679130947"><span class="hs-identifier hs-var">pcfg</span></a><span>
</span><a name="line-156"></a><span>              </span><a href="#local-6989586621679130952"><span class="hs-identifier hs-var">shelleyMajorVersion</span></a><span>
</span><a name="line-157"></a><span>              </span><a href="#local-6989586621679130950"><span class="hs-identifier hs-var">ledgerState</span></a><span>
</span><a name="line-158"></a><span>
</span><a name="line-159"></a><span>  </span><a name="local-8214565720323806380"><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.Abstract.SingleEraBlock.html#singleEraInfo"><span class="hs-identifier">singleEraInfo</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.Info.html#SingleEraInfo"><span class="hs-identifier hs-var">SingleEraInfo</span></a><span> </span><span class="hs-special">{</span><span>
</span><a name="line-160"></a><span>      </span><span class="hs-identifier">singleEraName</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-string">&quot;Byron&quot;</span><span>
</span><a name="line-161"></a><span>    </span><span class="hs-special">}</span><span>
</span><a name="line-162"></a><span>
</span><a name="line-163"></a><span class="hs-keyword">instance</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.Protocol.PBFT.Crypto.html#PBftCrypto"><span class="hs-identifier hs-type">PBftCrypto</span></a><span> </span><a href="#local-6989586621679130946"><span class="hs-identifier hs-type">bc</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.PartialConfig.html#HasPartialConsensusConfig"><span class="hs-identifier hs-type">HasPartialConsensusConfig</span></a><span> </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.Protocol.PBFT.html#PBft"><span class="hs-identifier hs-type">PBft</span></a><span> </span><a href="#local-6989586621679130946"><span class="hs-identifier hs-type">bc</span></a><span class="hs-special">)</span><span>
</span><a name="line-164"></a><span>  </span><span class="hs-comment">-- Use defaults</span><span>
</span><a name="line-165"></a><span>
</span><a name="line-166"></a><span class="hs-comment">-- | The trigger condition that will cause the hard fork transition.</span><span>
</span><a name="line-167"></a><span class="hs-keyword">data</span><span> </span><a name="TriggerHardFork"><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#TriggerHardFork"><span class="hs-identifier">TriggerHardFork</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-168"></a><span>    </span><span class="hs-comment">-- | Trigger the transition when the on-chain protocol major version (from</span><span>
</span><a name="line-169"></a><span>    </span><span class="hs-comment">-- the ledger state) reaches this number.</span><span>
</span><a name="line-170"></a><span>    </span><a name="TriggerHardForkAtVersion"><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#TriggerHardForkAtVersion"><span class="hs-identifier">TriggerHardForkAtVersion</span></a></a><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">Word16</span><span>
</span><a name="line-171"></a><span>    </span><span class="hs-comment">-- | For testing only, trigger the transition at a specific hard-coded</span><span>
</span><a name="line-172"></a><span>    </span><span class="hs-comment">-- epoch, irrespective of the ledger state.</span><span>
</span><a name="line-173"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="TriggerHardForkAtEpoch"><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#TriggerHardForkAtEpoch"><span class="hs-identifier">TriggerHardForkAtEpoch</span></a></a><span> </span><span class="hs-glyph">!</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-slotting-0.1.0.0/noopt/doc/html/cardano-slotting/src/Cardano.Slotting.Slot.html#EpochNo"><span class="hs-identifier hs-type">EpochNo</span></a><span>
</span><a name="line-174"></a><span>    </span><span class="hs-comment">-- | Never trigger a hard fork</span><span>
</span><a name="line-175"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="TriggerHardForkNever"><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#TriggerHardForkNever"><span class="hs-identifier">TriggerHardForkNever</span></a></a><span>
</span><a name="line-176"></a><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Generic</span><span class="hs-special">,</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src/Cardano.Prelude.GHC.Heap.NormalForm.Classy.html#NoUnexpectedThunks"><span class="hs-identifier hs-type">NoUnexpectedThunks</span></a><span class="hs-special">)</span><span>
</span><a name="line-177"></a><span>
</span><a name="line-178"></a><span class="hs-comment">-- | When Byron is part of the hard-fork combinator, we use the partial ledger</span><span>
</span><a name="line-179"></a><span class="hs-comment">-- config. Standalone Byron uses the regular ledger config. This means that</span><span>
</span><a name="line-180"></a><span class="hs-comment">-- the partial ledger config is the perfect place to store the trigger</span><span>
</span><a name="line-181"></a><span class="hs-comment">-- condition for the hard fork to Shelley, as we don't have to modify the</span><span>
</span><a name="line-182"></a><span class="hs-comment">-- ledger config for standalone Byron.</span><span>
</span><a name="line-183"></a><span class="hs-keyword">data</span><span> </span><a name="ByronPartialLedgerConfig"><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#ByronPartialLedgerConfig"><span class="hs-identifier">ByronPartialLedgerConfig</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="ByronPartialLedgerConfig"><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#ByronPartialLedgerConfig"><span class="hs-identifier">ByronPartialLedgerConfig</span></a></a><span> </span><span class="hs-special">{</span><span>
</span><a name="line-184"></a><span>      </span><a name="byronLedgerConfig"><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#byronLedgerConfig"><span class="hs-identifier">byronLedgerConfig</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.Ledger.Basics.html#LedgerConfig"><span class="hs-identifier hs-type">LedgerConfig</span></a><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-byron-0.1.0.0/noopt/doc/html/ouroboros-consensus-byron/src/Ouroboros.Consensus.Byron.Ledger.Block.html#ByronBlock"><span class="hs-identifier hs-type">ByronBlock</span></a><span class="hs-special">)</span><span>
</span><a name="line-185"></a><span>    </span><span class="hs-special">,</span><span> </span><a name="triggerHardFork"><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#triggerHardFork"><span class="hs-identifier">triggerHardFork</span></a></a><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#TriggerHardFork"><span class="hs-identifier hs-type">TriggerHardFork</span></a><span>
</span><a name="line-186"></a><span>    </span><span class="hs-special">}</span><span>
</span><a name="line-187"></a><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Generic</span><span class="hs-special">,</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src/Cardano.Prelude.GHC.Heap.NormalForm.Classy.html#NoUnexpectedThunks"><span class="hs-identifier hs-type">NoUnexpectedThunks</span></a><span class="hs-special">)</span><span>
</span><a name="line-188"></a><span>
</span><a name="line-189"></a><span class="hs-keyword">instance</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.PartialConfig.html#HasPartialLedgerConfig"><span class="hs-identifier hs-type">HasPartialLedgerConfig</span></a><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-byron-0.1.0.0/noopt/doc/html/ouroboros-consensus-byron/src/Ouroboros.Consensus.Byron.Ledger.Block.html#ByronBlock"><span class="hs-identifier hs-type">ByronBlock</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-190"></a><span>
</span><a name="line-191"></a><span>  </span><span class="hs-keyword">type</span><span> </span><span class="hs-identifier">PartialLedgerConfig</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-byron-0.1.0.0/noopt/doc/html/ouroboros-consensus-byron/src/Ouroboros.Consensus.Byron.Ledger.Block.html#ByronBlock"><span class="hs-identifier hs-type">ByronBlock</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#ByronPartialLedgerConfig"><span class="hs-identifier hs-type">ByronPartialLedgerConfig</span></a><span>
</span><a name="line-192"></a><span>
</span><a name="line-193"></a><span>  </span><a name="local-8214565720323807723"><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.PartialConfig.html#completeLedgerConfig"><span class="hs-identifier">completeLedgerConfig</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">byronLedgerConfig</span><span>
</span><a name="line-194"></a><span>
</span><a name="line-195"></a><span class="hs-comment">{-------------------------------------------------------------------------------
  SingleEraBlock Shelley
-------------------------------------------------------------------------------}</span><span>
</span><a name="line-198"></a><span>
</span><a name="line-199"></a><span class="hs-keyword">instance</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Protocol.Crypto.html#TPraosCrypto"><span class="hs-identifier hs-type">TPraosCrypto</span></a><span> </span><a href="#local-6989586621679130939"><span class="hs-identifier hs-type">sc</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.Abstract.SingleEraBlock.html#SingleEraBlock"><span class="hs-identifier hs-type">SingleEraBlock</span></a><span> </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Ledger.Block.html#ShelleyBlock"><span class="hs-identifier hs-type">ShelleyBlock</span></a><span> </span><a href="#local-6989586621679130939"><span class="hs-identifier hs-type">sc</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-200"></a><span>  </span><span class="hs-comment">-- No transition from Shelley to Goguen yet</span><span>
</span><a name="line-201"></a><span>  </span><a name="local-8214565720323806381"><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.Abstract.SingleEraBlock.html#singleEraTransition"><span class="hs-identifier">singleEraTransition</span></a></a><span> </span><a name="local-6989586621679130940"><a href="#local-6989586621679130940"><span class="hs-identifier">_cfg</span></a></a><span> </span><a name="local-6989586621679130941"><a href="#local-6989586621679130941"><span class="hs-identifier">_eraParams</span></a></a><span> </span><a name="local-6989586621679130942"><a href="#local-6989586621679130942"><span class="hs-identifier">_eraStart</span></a></a><span> </span><a name="local-6989586621679130943"><a href="#local-6989586621679130943"><span class="hs-identifier">_st</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Nothing</span><span>
</span><a name="line-202"></a><span>
</span><a name="line-203"></a><span>  </span><a name="local-8214565720323806380"><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.Abstract.SingleEraBlock.html#singleEraInfo"><span class="hs-identifier">singleEraInfo</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.Info.html#SingleEraInfo"><span class="hs-identifier hs-var">SingleEraInfo</span></a><span> </span><span class="hs-special">{</span><span>
</span><a name="line-204"></a><span>      </span><span class="hs-identifier">singleEraName</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-string">&quot;Shelley&quot;</span><span>
</span><a name="line-205"></a><span>    </span><span class="hs-special">}</span><span>
</span><a name="line-206"></a><span>
</span><a name="line-207"></a><span class="hs-keyword">instance</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Protocol.Crypto.html#TPraosCrypto"><span class="hs-identifier hs-type">TPraosCrypto</span></a><span> </span><a href="#local-6989586621679130930"><span class="hs-identifier hs-type">sc</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.PartialConfig.html#HasPartialConsensusConfig"><span class="hs-identifier hs-type">HasPartialConsensusConfig</span></a><span> </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Protocol.html#TPraos"><span class="hs-identifier hs-type">TPraos</span></a><span> </span><a href="#local-6989586621679130930"><span class="hs-identifier hs-type">sc</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-208"></a><span>  </span><span class="hs-keyword">type</span><span> </span><span class="hs-identifier">PartialConsensusConfig</span><span> </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Protocol.html#TPraos"><span class="hs-identifier hs-type">TPraos</span></a><span> </span><a href="#local-6989586621679130930"><span class="hs-identifier hs-type">sc</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Protocol.html#TPraosParams"><span class="hs-identifier hs-type">TPraosParams</span></a><span>
</span><a name="line-209"></a><span>
</span><a name="line-210"></a><span>  </span><a name="local-8214565720323807720"><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.PartialConfig.html#completeConsensusConfig"><span class="hs-identifier">completeConsensusConfig</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679130931"><a href="#local-6989586621679130931"><span class="hs-identifier">tpraosEpochInfo</span></a></a><span> </span><a name="local-6989586621679130932"><a href="#local-6989586621679130932"><span class="hs-identifier">tpraosParams</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Protocol.html#TPraosConfig"><span class="hs-identifier hs-var">TPraosConfig</span></a><span> </span><span class="hs-special">{</span><span class="hs-glyph">..</span><span class="hs-special">}</span><span>
</span><a name="line-211"></a><span>
</span><a name="line-212"></a><span>  </span><span class="hs-comment">-- 'ChainSelConfig' is ()</span><span>
</span><a name="line-213"></a><span>  </span><a name="local-8214565720323807719"><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.PartialConfig.html#partialChainSelConfig"><span class="hs-identifier">partialChainSelConfig</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-214"></a><span>
</span><a name="line-215"></a><span class="hs-keyword">newtype</span><span> </span><a name="ShelleyPartialLedgerConfig"><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#ShelleyPartialLedgerConfig"><span class="hs-identifier">ShelleyPartialLedgerConfig</span></a></a><span> </span><a name="local-6989586621679130873"><a href="#local-6989586621679130873"><span class="hs-identifier">sc</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="ShelleyPartialLedgerConfig"><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#ShelleyPartialLedgerConfig"><span class="hs-identifier">ShelleyPartialLedgerConfig</span></a></a><span> </span><span class="hs-special">{</span><span>
</span><a name="line-216"></a><span>      </span><span class="hs-comment">-- | We cache the non-partial ledger config containing a dummy</span><span>
</span><a name="line-217"></a><span>      </span><span class="hs-comment">-- 'EpochInfo' that needs to be replaced with the correct one.</span><span>
</span><a name="line-218"></a><span>      </span><span class="hs-comment">--</span><span>
</span><a name="line-219"></a><span>      </span><span class="hs-comment">-- We do this to avoid recomputing the ledger config each time</span><span>
</span><a name="line-220"></a><span>      </span><span class="hs-comment">-- 'completeLedgerConfig' is called, as 'mkShelleyLedgerConfig' does</span><span>
</span><a name="line-221"></a><span>      </span><span class="hs-comment">-- some rather expensive computations that shouldn't be repeated too</span><span>
</span><a name="line-222"></a><span>      </span><span class="hs-comment">-- often (e.g., 'sgActiveSlotCoeff').</span><span>
</span><a name="line-223"></a><span>      </span><a name="getShelleyPartialLedgerConfig"><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#getShelleyPartialLedgerConfig"><span class="hs-identifier">getShelleyPartialLedgerConfig</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Ledger.Ledger.html#ShelleyLedgerConfig"><span class="hs-identifier hs-type">ShelleyLedgerConfig</span></a><span> </span><a href="#local-6989586621679130873"><span class="hs-identifier hs-type">sc</span></a><span>
</span><a name="line-224"></a><span>    </span><span class="hs-special">}</span><span>
</span><a name="line-225"></a><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Generic</span><span class="hs-special">,</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src/Cardano.Prelude.GHC.Heap.NormalForm.Classy.html#NoUnexpectedThunks"><span class="hs-identifier hs-type">NoUnexpectedThunks</span></a><span class="hs-special">)</span><span>
</span><a name="line-226"></a><span>
</span><a name="line-227"></a><span class="hs-keyword">instance</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Protocol.Crypto.html#TPraosCrypto"><span class="hs-identifier hs-type">TPraosCrypto</span></a><span> </span><a href="#local-6989586621679130927"><span class="hs-identifier hs-type">sc</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.PartialConfig.html#HasPartialLedgerConfig"><span class="hs-identifier hs-type">HasPartialLedgerConfig</span></a><span> </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Ledger.Block.html#ShelleyBlock"><span class="hs-identifier hs-type">ShelleyBlock</span></a><span> </span><a href="#local-6989586621679130927"><span class="hs-identifier hs-type">sc</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-228"></a><span>  </span><span class="hs-keyword">type</span><span> </span><span class="hs-identifier">PartialLedgerConfig</span><span> </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Ledger.Block.html#ShelleyBlock"><span class="hs-identifier hs-type">ShelleyBlock</span></a><span> </span><a href="#local-6989586621679130927"><span class="hs-identifier hs-type">sc</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#ShelleyPartialLedgerConfig"><span class="hs-identifier hs-type">ShelleyPartialLedgerConfig</span></a><span> </span><a href="#local-6989586621679130927"><span class="hs-identifier hs-type">sc</span></a><span>
</span><a name="line-229"></a><span>
</span><a name="line-230"></a><span>  </span><span class="hs-comment">-- Replace the dummy 'EpochInfo' with the real one</span><span>
</span><a name="line-231"></a><span>  </span><a name="local-8214565720323807723"><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.PartialConfig.html#completeLedgerConfig"><span class="hs-identifier">completeLedgerConfig</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679130928"><a href="#local-6989586621679130928"><span class="hs-identifier">epochInfo</span></a></a><span> </span><span class="hs-special">(</span><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#ShelleyPartialLedgerConfig"><span class="hs-identifier hs-var">ShelleyPartialLedgerConfig</span></a><span> </span><a name="local-6989586621679130929"><a href="#local-6989586621679130929"><span class="hs-identifier">cfg</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-232"></a><span>      </span><a href="#local-6989586621679130929"><span class="hs-identifier hs-var">cfg</span></a><span> </span><span class="hs-special">{</span><span>
</span><a name="line-233"></a><span>          </span><span class="hs-identifier">shelleyLedgerGlobals</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">shelleyLedgerGlobals</span><span> </span><a href="#local-6989586621679130929"><span class="hs-identifier hs-var">cfg</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">{</span><span>
</span><a name="line-234"></a><span>              </span><span class="hs-identifier">SL.epochInfo</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679130928"><span class="hs-identifier hs-var">epochInfo</span></a><span>
</span><a name="line-235"></a><span>            </span><span class="hs-special">}</span><span>
</span><a name="line-236"></a><span>        </span><span class="hs-special">}</span><span>
</span><a name="line-237"></a><span>
</span><a name="line-238"></a><span class="hs-comment">{-------------------------------------------------------------------------------
  CanHardFork
-------------------------------------------------------------------------------}</span><span>
</span><a name="line-241"></a><span>
</span><a name="line-242"></a><span class="hs-keyword">instance</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Protocol.Crypto.html#TPraosCrypto"><span class="hs-identifier hs-type">TPraosCrypto</span></a><span> </span><a href="#local-6989586621679130874"><span class="hs-identifier hs-type">c</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.Abstract.CanHardFork.html#CanHardFork"><span class="hs-identifier hs-type">CanHardFork</span></a><span> </span><span class="hs-special">(</span><a href="Ouroboros.Consensus.Cardano.Block.html#CardanoEras"><span class="hs-identifier hs-type">CardanoEras</span></a><span> </span><a href="#local-6989586621679130874"><span class="hs-identifier hs-type">c</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-243"></a><span>  </span><a name="local-8214565720323806334"><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.Abstract.CanHardFork.html#hardForkEraTranslation"><span class="hs-identifier">hardForkEraTranslation</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.Translation.html#EraTranslation"><span class="hs-identifier hs-var">EraTranslation</span></a><span> </span><span class="hs-special">{</span><span>
</span><a name="line-244"></a><span>      </span><span class="hs-identifier">translateLedgerState</span><span>   </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.Util.InPairs.html#PCons"><span class="hs-identifier hs-var">PCons</span></a><span> </span><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#translateLedgerStateByronToShelleyWrapper"><span class="hs-identifier hs-var">translateLedgerStateByronToShelleyWrapper</span></a><span>   </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.Util.InPairs.html#PNil"><span class="hs-identifier hs-var">PNil</span></a><span>
</span><a name="line-245"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">translateChainDepState</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.Util.InPairs.html#PCons"><span class="hs-identifier hs-var">PCons</span></a><span> </span><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#translateChainDepStateByronToShelleyWrapper"><span class="hs-identifier hs-var">translateChainDepStateByronToShelleyWrapper</span></a><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.Util.InPairs.html#PNil"><span class="hs-identifier hs-var">PNil</span></a><span>
</span><a name="line-246"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">translateLedgerView</span><span>    </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.Util.InPairs.html#PCons"><span class="hs-identifier hs-var">PCons</span></a><span> </span><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#translateLedgerViewByronToShelleyWrapper"><span class="hs-identifier hs-var">translateLedgerViewByronToShelleyWrapper</span></a><span>    </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.Util.InPairs.html#PNil"><span class="hs-identifier hs-var">PNil</span></a><span>
</span><a name="line-247"></a><span>    </span><span class="hs-special">}</span><span>
</span><a name="line-248"></a><span>  </span><a name="local-8214565720323806333"><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.Abstract.CanHardFork.html#hardForkChainSel"><span class="hs-identifier">hardForkChainSel</span></a></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.Util.Tails.html#mk2"><span class="hs-identifier hs-var">Tails.mk2</span></a><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.Protocol.ChainSel.html#CompareBlockNo"><span class="hs-identifier hs-var">CompareBlockNo</span></a><span>
</span><a name="line-249"></a><span>  </span><a name="local-8214565720323806332"><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.Abstract.CanHardFork.html#hardForkInjectTxs"><span class="hs-identifier">hardForkInjectTxs</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.Util.InPairs.html#mk2"><span class="hs-identifier hs-var">InPairs.mk2</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.Util.InPairs.html#ignoringBoth"><span class="hs-identifier hs-var">InPairs.ignoringBoth</span></a><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.InjectTxs.html#cannotInjectTx"><span class="hs-identifier hs-var">cannotInjectTx</span></a><span>
</span><a name="line-250"></a><span>
</span><a name="line-251"></a><span class="hs-comment">{-------------------------------------------------------------------------------
  Translation from Byron to Shelley
-------------------------------------------------------------------------------}</span><span>
</span><a name="line-254"></a><span>
</span><a name="line-255"></a><span class="hs-identifier">translateHeaderHashByronToShelley</span><span>
</span><a name="line-256"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><a name="local-6989586621679130965"><a href="#local-6989586621679130965"><span class="hs-identifier">sc</span></a></a><span class="hs-operator">.</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">Crypto</span></a><span> </span><a href="#local-6989586621679130965"><span class="hs-identifier hs-type">sc</span></a><span>
</span><a name="line-257"></a><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-network-0.1.0.0/noopt/doc/html/ouroboros-network/src/Ouroboros.Network.Block.html#HeaderHash"><span class="hs-identifier hs-type">HeaderHash</span></a><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-byron-0.1.0.0/noopt/doc/html/ouroboros-consensus-byron/src/Ouroboros.Consensus.Byron.Ledger.Block.html#ByronBlock"><span class="hs-identifier hs-type">ByronBlock</span></a><span>
</span><a name="line-258"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-network-0.1.0.0/noopt/doc/html/ouroboros-network/src/Ouroboros.Network.Block.html#HeaderHash"><span class="hs-identifier hs-type">HeaderHash</span></a><span> </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Ledger.Block.html#ShelleyBlock"><span class="hs-identifier hs-type">ShelleyBlock</span></a><span> </span><a href="#local-6989586621679130965"><span class="hs-identifier hs-type">sc</span></a><span class="hs-special">)</span><span>
</span><a name="line-259"></a><a name="translateHeaderHashByronToShelley"><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#translateHeaderHashByronToShelley"><span class="hs-identifier">translateHeaderHashByronToShelley</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-260"></a><span>      </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.Block.Abstract.html#fromShortRawHash"><span class="hs-identifier hs-var">fromShortRawHash</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Proxy</span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Ledger.Block.html#ShelleyBlock"><span class="hs-identifier hs-type">ShelleyBlock</span></a><span> </span><a href="#local-6989586621679130965"><span class="hs-identifier hs-type">sc</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-261"></a><span>    </span><span class="hs-operator hs-var">.</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.Block.Abstract.html#toShortRawHash"><span class="hs-identifier hs-var">toShortRawHash</span></a><span>   </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Proxy</span><span> </span><span class="hs-glyph">@</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-byron-0.1.0.0/noopt/doc/html/ouroboros-consensus-byron/src/Ouroboros.Consensus.Byron.Ledger.Block.html#ByronBlock"><span class="hs-identifier hs-type">ByronBlock</span></a><span class="hs-special">)</span><span>
</span><a name="line-262"></a><span>
</span><a name="line-263"></a><span class="hs-identifier">translatePointByronToShelley</span><span>
</span><a name="line-264"></a><span>  </span><span class="hs-glyph">::</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">Crypto</span></a><span> </span><a href="#local-6989586621679130964"><span class="hs-identifier hs-type">sc</span></a><span>
</span><a name="line-265"></a><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-network-0.1.0.0/noopt/doc/html/ouroboros-network/src/Ouroboros.Network.Block.html#Point"><span class="hs-identifier hs-type">Point</span></a><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-byron-0.1.0.0/noopt/doc/html/ouroboros-consensus-byron/src/Ouroboros.Consensus.Byron.Ledger.Block.html#ByronBlock"><span class="hs-identifier hs-type">ByronBlock</span></a><span>
</span><a name="line-266"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-network-0.1.0.0/noopt/doc/html/ouroboros-network/src/Ouroboros.Network.Block.html#Point"><span class="hs-identifier hs-type">Point</span></a><span> </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Ledger.Block.html#ShelleyBlock"><span class="hs-identifier hs-type">ShelleyBlock</span></a><span> </span><a href="#local-6989586621679130964"><span class="hs-identifier hs-type">sc</span></a><span class="hs-special">)</span><span>
</span><a name="line-267"></a><a name="translatePointByronToShelley"><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#translatePointByronToShelley"><span class="hs-identifier">translatePointByronToShelley</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><a name="line-268"></a><span>    </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-network-0.1.0.0/noopt/doc/html/ouroboros-network/src/Ouroboros.Network.Block.html#GenesisPoint"><span class="hs-identifier hs-var">GenesisPoint</span></a><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-network-0.1.0.0/noopt/doc/html/ouroboros-network/src/Ouroboros.Network.Block.html#GenesisPoint"><span class="hs-identifier hs-var">GenesisPoint</span></a><span>
</span><a name="line-269"></a><span>    </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-network-0.1.0.0/noopt/doc/html/ouroboros-network/src/Ouroboros.Network.Block.html#BlockPoint"><span class="hs-identifier hs-var">BlockPoint</span></a><span> </span><a name="local-6989586621679134999"><a href="#local-6989586621679134999"><span class="hs-identifier">s</span></a></a><span> </span><a name="local-6989586621679135000"><a href="#local-6989586621679135000"><span class="hs-identifier">h</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-network-0.1.0.0/noopt/doc/html/ouroboros-network/src/Ouroboros.Network.Block.html#BlockPoint"><span class="hs-identifier hs-var">BlockPoint</span></a><span> </span><a href="#local-6989586621679134999"><span class="hs-identifier hs-var">s</span></a><span> </span><span class="hs-special">(</span><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#translateHeaderHashByronToShelley"><span class="hs-identifier hs-var">translateHeaderHashByronToShelley</span></a><span> </span><a href="#local-6989586621679135000"><span class="hs-identifier hs-var">h</span></a><span class="hs-special">)</span><span>
</span><a name="line-270"></a><span>
</span><a name="line-271"></a><span>
</span><a name="line-272"></a><span class="hs-comment">-- | We use the same hashing algorithm so we can unwrap and rewrap the bytes.</span><span>
</span><a name="line-273"></a><span class="hs-comment">-- We don't care about the type that is hashed, which will differ going from</span><span>
</span><a name="line-274"></a><span class="hs-comment">-- Byron to Shelley, we just use the hashes as IDs.</span><span>
</span><a name="line-275"></a><span class="hs-identifier">translateTxIdByronToShelley</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">Crypto</span></a><span> </span><a href="#local-6989586621679130963"><span class="hs-identifier hs-type">sc</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-ledger-0.1.0.0/noopt/doc/html/cardano-ledger/src/Cardano.Chain.UTxO.Tx.html#TxId"><span class="hs-identifier hs-type">CC.TxId</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.TxData.html#TxId"><span class="hs-identifier hs-type">SL.TxId</span></a><span> </span><a href="#local-6989586621679130963"><span class="hs-identifier hs-type">sc</span></a><span>
</span><a name="line-276"></a><a name="translateTxIdByronToShelley"><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#translateTxIdByronToShelley"><span class="hs-identifier">translateTxIdByronToShelley</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-277"></a><span>    </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.TxData.html#TxId"><span class="hs-identifier hs-var">SL.TxId</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.Util.html#hashFromBytesE"><span class="hs-identifier hs-var">hashFromBytesE</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-crypto-wrapper-1.3.0/noopt/doc/html/cardano-crypto-wrapper/src/Cardano.Crypto.Hashing.html#hashToBytes"><span class="hs-identifier hs-var">Hashing.hashToBytes</span></a><span>
</span><a name="line-278"></a><span>
</span><a name="line-279"></a><span class="hs-identifier">translateCompactTxInByronToShelley</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">Crypto</span></a><span> </span><a href="#local-6989586621679130962"><span class="hs-identifier hs-type">sc</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-ledger-0.1.0.0/noopt/doc/html/cardano-ledger/src/Cardano.Chain.UTxO.Compact.html#CompactTxIn"><span class="hs-identifier hs-type">CC.CompactTxIn</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.TxData.html#TxIn"><span class="hs-identifier hs-type">SL.TxIn</span></a><span> </span><a href="#local-6989586621679130962"><span class="hs-identifier hs-type">sc</span></a><span>
</span><a name="line-280"></a><a name="translateCompactTxInByronToShelley"><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#translateCompactTxInByronToShelley"><span class="hs-identifier">translateCompactTxInByronToShelley</span></a></a><span> </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-ledger-0.1.0.0/noopt/doc/html/cardano-ledger/src/Cardano.Chain.UTxO.Compact.html#CompactTxInUtxo"><span class="hs-identifier hs-var">CC.CompactTxInUtxo</span></a><span> </span><a name="local-6989586621679135001"><a href="#local-6989586621679135001"><span class="hs-identifier">compactTxId</span></a></a><span> </span><a name="local-6989586621679135002"><a href="#local-6989586621679135002"><span class="hs-identifier">idx</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-281"></a><span>    </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.TxData.html#TxInCompact"><span class="hs-identifier hs-var">SL.TxInCompact</span></a><span>
</span><a name="line-282"></a><span>      </span><span class="hs-special">(</span><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#translateTxIdByronToShelley"><span class="hs-identifier hs-var">translateTxIdByronToShelley</span></a><span> </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-ledger-0.1.0.0/noopt/doc/html/cardano-ledger/src/Cardano.Chain.UTxO.Compact.html#fromCompactTxId"><span class="hs-identifier hs-var">CC.fromCompactTxId</span></a><span> </span><a href="#local-6989586621679135001"><span class="hs-identifier hs-var">compactTxId</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-283"></a><span>      </span><span class="hs-special">(</span><span class="hs-identifier hs-var">fromIntegral</span><span> </span><a href="#local-6989586621679135002"><span class="hs-identifier hs-var">idx</span></a><span class="hs-special">)</span><span>
</span><a name="line-284"></a><span>
</span><a name="line-285"></a><span class="hs-identifier">translateCompactTxOutByronToShelley</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-ledger-0.1.0.0/noopt/doc/html/cardano-ledger/src/Cardano.Chain.UTxO.Compact.html#CompactTxOut"><span class="hs-identifier hs-type">CC.CompactTxOut</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.TxData.html#TxOut"><span class="hs-identifier hs-type">SL.TxOut</span></a><span> </span><a href="#local-6989586621679130961"><span class="hs-identifier hs-type">sc</span></a><span>
</span><a name="line-286"></a><a name="translateCompactTxOutByronToShelley"><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#translateCompactTxOutByronToShelley"><span class="hs-identifier">translateCompactTxOutByronToShelley</span></a></a><span> </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-ledger-0.1.0.0/noopt/doc/html/cardano-ledger/src/Cardano.Chain.UTxO.Compact.html#CompactTxOut"><span class="hs-identifier hs-var">CC.CompactTxOut</span></a><span> </span><a name="local-6989586621679135003"><a href="#local-6989586621679135003"><span class="hs-identifier">compactAddr</span></a></a><span> </span><a name="local-6989586621679135004"><a href="#local-6989586621679135004"><span class="hs-identifier">amount</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-287"></a><span>    </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.TxData.html#TxOutCompact"><span class="hs-identifier hs-var">SL.TxOutCompact</span></a><span>
</span><a name="line-288"></a><span>      </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-ledger-0.1.0.0/noopt/doc/html/cardano-ledger/src/Cardano.Chain.Common.Compact.html#unsafeGetCompactAddress"><span class="hs-identifier hs-var">CC.unsafeGetCompactAddress</span></a><span> </span><a href="#local-6989586621679135003"><span class="hs-identifier hs-var">compactAddr</span></a><span class="hs-special">)</span><span>
</span><a name="line-289"></a><span>      </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-ledger-0.1.0.0/noopt/doc/html/cardano-ledger/src/Cardano.Chain.Common.Lovelace.html#unsafeGetLovelace"><span class="hs-identifier hs-var">CC.unsafeGetLovelace</span></a><span> </span><a href="#local-6989586621679135004"><span class="hs-identifier hs-var">amount</span></a><span class="hs-special">)</span><span>
</span><a name="line-290"></a><span>
</span><a name="line-291"></a><span class="hs-identifier">translateUTxOByronToShelley</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><a name="local-6989586621679130960"><a href="#local-6989586621679130960"><span class="hs-identifier">sc</span></a></a><span class="hs-operator">.</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">Crypto</span></a><span> </span><a href="#local-6989586621679130960"><span class="hs-identifier hs-type">sc</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-ledger-0.1.0.0/noopt/doc/html/cardano-ledger/src/Cardano.Chain.UTxO.UTxO.html#UTxO"><span class="hs-identifier hs-type">CC.UTxO</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.UTxO.html#UTxO"><span class="hs-identifier hs-type">SL.UTxO</span></a><span> </span><a href="#local-6989586621679130960"><span class="hs-identifier hs-type">sc</span></a><span>
</span><a name="line-292"></a><a name="translateUTxOByronToShelley"><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#translateUTxOByronToShelley"><span class="hs-identifier">translateUTxOByronToShelley</span></a></a><span> </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-ledger-0.1.0.0/noopt/doc/html/cardano-ledger/src/Cardano.Chain.UTxO.UTxO.html#UTxO"><span class="hs-identifier hs-var">CC.UTxO</span></a><span> </span><a name="local-6989586621679135005"><a href="#local-6989586621679135005"><span class="hs-identifier">utxoByron</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-293"></a><span>    </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.UTxO.html#UTxO"><span class="hs-identifier hs-var">SL.UTxO</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">Map.fromList</span><span>
</span><a name="line-294"></a><span>      </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679135115"><span class="hs-identifier hs-var">txInShelley</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679135116"><span class="hs-identifier hs-var">txOutShelley</span></a><span class="hs-special">)</span><span>
</span><a name="line-295"></a><span>      </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679135113"><a href="#local-6989586621679135113"><span class="hs-identifier">txInByron</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679135114"><a href="#local-6989586621679135114"><span class="hs-identifier">txOutByron</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">Map.toList</span><span> </span><a href="#local-6989586621679135005"><span class="hs-identifier hs-var">utxoByron</span></a><span>
</span><a name="line-296"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679135115"><a href="#local-6989586621679135115"><span class="hs-identifier">txInShelley</span></a></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#translateCompactTxInByronToShelley"><span class="hs-identifier hs-var">translateCompactTxInByronToShelley</span></a><span>  </span><a href="#local-6989586621679135113"><span class="hs-identifier hs-var">txInByron</span></a><span>
</span><a name="line-297"></a><span>            </span><a name="local-6989586621679135116"><a href="#local-6989586621679135116"><span class="hs-identifier">txOutShelley</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#translateCompactTxOutByronToShelley"><span class="hs-identifier hs-var">translateCompactTxOutByronToShelley</span></a><span> </span><a href="#local-6989586621679135114"><span class="hs-identifier hs-var">txOutByron</span></a><span>
</span><a name="line-298"></a><span>      </span><span class="hs-special">]</span><span>
</span><a name="line-299"></a><span>
</span><a name="line-300"></a><span class="hs-identifier">translateLedgerStateByronToShelleyWrapper</span><span>
</span><a name="line-301"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><a name="local-6989586621679130959"><a href="#local-6989586621679130959"><span class="hs-identifier">sc</span></a></a><span class="hs-operator">.</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">Crypto</span></a><span> </span><a href="#local-6989586621679130959"><span class="hs-identifier hs-type">sc</span></a><span>
</span><a name="line-302"></a><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.Util.InPairs.html#RequiringBoth"><span class="hs-identifier hs-type">RequiringBoth</span></a><span>
</span><a name="line-303"></a><span>       </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.TypeFamilyWrappers.html#WrapLedgerConfig"><span class="hs-identifier hs-type">WrapLedgerConfig</span></a><span>
</span><a name="line-304"></a><span>       </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.State.Types.html#Translate"><span class="hs-identifier hs-type">Translate</span></a><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.Ledger.Basics.html#LedgerState"><span class="hs-identifier hs-type">LedgerState</span></a><span class="hs-special">)</span><span>
</span><a name="line-305"></a><span>       </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-byron-0.1.0.0/noopt/doc/html/ouroboros-consensus-byron/src/Ouroboros.Consensus.Byron.Ledger.Block.html#ByronBlock"><span class="hs-identifier hs-type">ByronBlock</span></a><span>
</span><a name="line-306"></a><span>       </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Ledger.Block.html#ShelleyBlock"><span class="hs-identifier hs-type">ShelleyBlock</span></a><span> </span><a href="#local-6989586621679130959"><span class="hs-identifier hs-type">sc</span></a><span class="hs-special">)</span><span>
</span><a name="line-307"></a><a name="translateLedgerStateByronToShelleyWrapper"><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#translateLedgerStateByronToShelleyWrapper"><span class="hs-identifier">translateLedgerStateByronToShelleyWrapper</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-308"></a><span>    </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.Util.InPairs.html#RequireBoth"><span class="hs-identifier hs-var">RequireBoth</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.TypeFamilyWrappers.html#WrapLedgerConfig"><span class="hs-identifier hs-var">WrapLedgerConfig</span></a><span> </span><a name="local-6989586621679135117"><a href="#local-6989586621679135117"><span class="hs-identifier">cfgShelley</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-309"></a><span>    </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.State.Types.html#Translate"><span class="hs-identifier hs-var">Translate</span></a><span>   </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679135118"><a href="#local-6989586621679135118"><span class="hs-identifier">epochNo</span></a></a><span> </span><a name="local-6989586621679135119"><a href="#local-6989586621679135119"><span class="hs-identifier">ledgerByron</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-310"></a><span>      </span><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#translateLedgerStateByronToShelley"><span class="hs-identifier hs-var">translateLedgerStateByronToShelley</span></a><span> </span><a href="#local-6989586621679135117"><span class="hs-identifier hs-var">cfgShelley</span></a><span> </span><a href="#local-6989586621679135118"><span class="hs-identifier hs-var">epochNo</span></a><span> </span><a href="#local-6989586621679135119"><span class="hs-identifier hs-var">ledgerByron</span></a><span>
</span><a name="line-311"></a><span>
</span><a name="line-312"></a><span class="hs-identifier">translateLedgerStateByronToShelley</span><span>
</span><a name="line-313"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><a name="local-6989586621679130958"><a href="#local-6989586621679130958"><span class="hs-identifier">sc</span></a></a><span class="hs-operator">.</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">Crypto</span></a><span> </span><a href="#local-6989586621679130958"><span class="hs-identifier hs-type">sc</span></a><span>
</span><a name="line-314"></a><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.Ledger.Basics.html#LedgerConfig"><span class="hs-identifier hs-type">LedgerConfig</span></a><span> </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Ledger.Block.html#ShelleyBlock"><span class="hs-identifier hs-type">ShelleyBlock</span></a><span> </span><a href="#local-6989586621679130958"><span class="hs-identifier hs-type">sc</span></a><span class="hs-special">)</span><span>
</span><a name="line-315"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-slotting-0.1.0.0/noopt/doc/html/cardano-slotting/src/Cardano.Slotting.Slot.html#EpochNo"><span class="hs-identifier hs-type">EpochNo</span></a><span>
</span><a name="line-316"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.Ledger.Basics.html#LedgerState"><span class="hs-identifier hs-type">LedgerState</span></a><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-byron-0.1.0.0/noopt/doc/html/ouroboros-consensus-byron/src/Ouroboros.Consensus.Byron.Ledger.Block.html#ByronBlock"><span class="hs-identifier hs-type">ByronBlock</span></a><span>
</span><a name="line-317"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.Ledger.Basics.html#LedgerState"><span class="hs-identifier hs-type">LedgerState</span></a><span> </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Ledger.Block.html#ShelleyBlock"><span class="hs-identifier hs-type">ShelleyBlock</span></a><span> </span><a href="#local-6989586621679130958"><span class="hs-identifier hs-type">sc</span></a><span class="hs-special">)</span><span>
</span><a name="line-318"></a><a name="translateLedgerStateByronToShelley"><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#translateLedgerStateByronToShelley"><span class="hs-identifier">translateLedgerStateByronToShelley</span></a></a><span> </span><a name="local-6989586621679135120"><a href="#local-6989586621679135120"><span class="hs-identifier">cfgShelley</span></a></a><span> </span><a name="local-6989586621679135121"><a href="#local-6989586621679135121"><span class="hs-identifier">epochNo</span></a></a><span> </span><a name="local-6989586621679135122"><a href="#local-6989586621679135122"><span class="hs-identifier">ledgerByron</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-319"></a><span>    </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Ledger.Ledger.html#ShelleyLedgerState"><span class="hs-identifier hs-var">ShelleyLedgerState</span></a><span> </span><span class="hs-special">{</span><span>
</span><a name="line-320"></a><span>      </span><span class="hs-identifier">ledgerTip</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679135136"><span class="hs-identifier hs-var">ledgerTipShelley</span></a><span>
</span><a name="line-321"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">history</span><span>   </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Ledger.History.html#empty"><span class="hs-identifier hs-var">History.empty</span></a><span>
</span><a name="line-322"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="#local-6989586621679135128"><span class="hs-identifier hs-var">shelleyState</span></a><span>
</span><a name="line-323"></a><span>    </span><span class="hs-special">}</span><span>
</span><a name="line-324"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-325"></a><span>    </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Ledger.Ledger.html#ShelleyLedgerConfig"><span class="hs-identifier hs-var">ShelleyLedgerConfig</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">shelleyLedgerGenesis</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621679135127"><a href="#local-6989586621679135127"><span class="hs-identifier">genesisShelley</span></a></a><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679135120"><span class="hs-identifier hs-var">cfgShelley</span></a><span>
</span><a name="line-326"></a><span>
</span><a name="line-327"></a><span>    </span><span class="hs-identifier">shelleyState</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.API.Validation.html#ShelleyState"><span class="hs-identifier hs-type">SL.ShelleyState</span></a><span> </span><a href="#local-6989586621679130958"><span class="hs-identifier hs-type">sc</span></a><span>
</span><a name="line-328"></a><span>    </span><a name="local-6989586621679135128"><a href="#local-6989586621679135128"><span class="hs-identifier">shelleyState</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.LedgerState.html#NewEpochState"><span class="hs-identifier hs-var">SL.NewEpochState</span></a><span> </span><span class="hs-special">{</span><span>
</span><a name="line-329"></a><span>        </span><span class="hs-identifier">nesEL</span><span>     </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679135121"><span class="hs-identifier hs-var">epochNo</span></a><span>
</span><a name="line-330"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">nesBprev</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.EpochBoundary.html#BlocksMade"><span class="hs-identifier hs-var">SL.BlocksMade</span></a><span> </span><span class="hs-identifier hs-var">Map.empty</span><span>
</span><a name="line-331"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">nesBcur</span><span>   </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.EpochBoundary.html#BlocksMade"><span class="hs-identifier hs-var">SL.BlocksMade</span></a><span> </span><span class="hs-identifier hs-var">Map.empty</span><span>
</span><a name="line-332"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">nesEs</span><span>     </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679135132"><span class="hs-identifier hs-var">epochState</span></a><span>
</span><a name="line-333"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">nesRu</span><span>     </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.BaseTypes.html#SNothing"><span class="hs-identifier hs-var">SL.SNothing</span></a><span>
</span><a name="line-334"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">nesPd</span><span>     </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.Delegation.Certificates.html#PoolDistr"><span class="hs-identifier hs-var">SL.PoolDistr</span></a><span> </span><span class="hs-identifier hs-var">Map.empty</span><span>
</span><a name="line-335"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">nesOsched</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679135137"><span class="hs-identifier hs-var">overlaySchedule</span></a><span>
</span><a name="line-336"></a><span>      </span><span class="hs-special">}</span><span>
</span><a name="line-337"></a><span>
</span><a name="line-338"></a><span>    </span><span class="hs-identifier">pparams</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.PParams.html#PParams"><span class="hs-identifier hs-type">SL.PParams</span></a><span>
</span><a name="line-339"></a><span>    </span><a name="local-6989586621679135129"><a href="#local-6989586621679135129"><span class="hs-identifier">pparams</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">sgProtocolParams</span><span> </span><a href="#local-6989586621679135127"><span class="hs-identifier hs-var">genesisShelley</span></a><span>
</span><a name="line-340"></a><span>
</span><a name="line-341"></a><span>    </span><span class="hs-comment">-- | NOTE: we ignore the Byron delegation map because the genesis and</span><span>
</span><a name="line-342"></a><span>    </span><span class="hs-comment">-- delegation verification keys are hashed using a different hashing</span><span>
</span><a name="line-343"></a><span>    </span><span class="hs-comment">-- scheme, Blake2b_224, whereas Shelley uses Blake2b_256. This means we</span><span>
</span><a name="line-344"></a><span>    </span><span class="hs-comment">-- can't simply convert them, as Byron nowhere stores the original</span><span>
</span><a name="line-345"></a><span>    </span><span class="hs-comment">-- verification keys.</span><span>
</span><a name="line-346"></a><span>    </span><span class="hs-comment">--</span><span>
</span><a name="line-347"></a><span>    </span><span class="hs-comment">-- Fortunately, no Byron genesis delegations have happened yet, and if</span><span>
</span><a name="line-348"></a><span>    </span><span class="hs-comment">-- they did, we would be aware of them before the hard fork, as we</span><span>
</span><a name="line-349"></a><span>    </span><span class="hs-comment">-- instigate the hard fork. We just have to make sure that the hard-coded</span><span>
</span><a name="line-350"></a><span>    </span><span class="hs-comment">-- Shelley genesis contains the same genesis and delegation verification</span><span>
</span><a name="line-351"></a><span>    </span><span class="hs-comment">-- keys, but hashed with the right algorithm.</span><span>
</span><a name="line-352"></a><span>    </span><span class="hs-identifier">genDelegs</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.Keys.html#GenDelegs"><span class="hs-identifier hs-type">SL.GenDelegs</span></a><span> </span><a href="#local-6989586621679130958"><span class="hs-identifier hs-type">sc</span></a><span>
</span><a name="line-353"></a><span>    </span><a name="local-6989586621679135130"><a href="#local-6989586621679135130"><span class="hs-identifier">genDelegs</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.Keys.html#GenDelegs"><span class="hs-identifier hs-var">SL.GenDelegs</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">sgGenDelegs</span><span> </span><a href="#local-6989586621679135127"><span class="hs-identifier hs-var">genesisShelley</span></a><span>
</span><a name="line-354"></a><span>
</span><a name="line-355"></a><span>    </span><span class="hs-identifier">reserves</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">SL.Coin</span></a><span>
</span><a name="line-356"></a><span>    </span><a name="local-6989586621679135131"><a href="#local-6989586621679135131"><span class="hs-identifier">reserves</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-357"></a><span>        </span><span class="hs-identifier hs-var">fromIntegral</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">sgMaxLovelaceSupply</span><span> </span><a href="#local-6989586621679135127"><span class="hs-identifier hs-var">genesisShelley</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.UTxO.html#balance"><span class="hs-identifier hs-var">SL.balance</span></a><span> </span><a href="#local-6989586621679135134"><span class="hs-identifier hs-var">utxoShelley</span></a><span>
</span><a name="line-358"></a><span>
</span><a name="line-359"></a><span>    </span><span class="hs-identifier">epochState</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.LedgerState.html#EpochState"><span class="hs-identifier hs-type">SL.EpochState</span></a><span> </span><a href="#local-6989586621679130958"><span class="hs-identifier hs-type">sc</span></a><span>
</span><a name="line-360"></a><span>    </span><a name="local-6989586621679135132"><a href="#local-6989586621679135132"><span class="hs-identifier">epochState</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.LedgerState.html#EpochState"><span class="hs-identifier hs-var">SL.EpochState</span></a><span> </span><span class="hs-special">{</span><span>
</span><a name="line-361"></a><span>        </span><span class="hs-identifier">esAccountState</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.LedgerState.html#AccountState"><span class="hs-identifier hs-var">SL.AccountState</span></a><span> </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.Coin.html#Coin"><span class="hs-identifier hs-var">SL.Coin</span></a><span> </span><span class="hs-number">0</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621679135131"><span class="hs-identifier hs-var">reserves</span></a><span>
</span><a name="line-362"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">esSnapshots</span><span>    </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.EpochBoundary.html#emptySnapShots"><span class="hs-identifier hs-var">SL.emptySnapShots</span></a><span>
</span><a name="line-363"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">esLState</span><span>       </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679135135"><span class="hs-identifier hs-var">ledgerState</span></a><span>
</span><a name="line-364"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">esPrevPp</span><span>       </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679135129"><span class="hs-identifier hs-var">pparams</span></a><span>
</span><a name="line-365"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">esPp</span><span>           </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679135129"><span class="hs-identifier hs-var">pparams</span></a><span>
</span><a name="line-366"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">esNonMyopic</span><span>    </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.Rewards.html#emptyNonMyopic"><span class="hs-identifier hs-var">SL.emptyNonMyopic</span></a><span>
</span><a name="line-367"></a><span>      </span><span class="hs-special">}</span><span>
</span><a name="line-368"></a><span>
</span><a name="line-369"></a><span>    </span><span class="hs-identifier">utxoByron</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-ledger-0.1.0.0/noopt/doc/html/cardano-ledger/src/Cardano.Chain.UTxO.UTxO.html#UTxO"><span class="hs-identifier hs-type">CC.UTxO</span></a><span>
</span><a name="line-370"></a><span>    </span><a name="local-6989586621679135133"><a href="#local-6989586621679135133"><span class="hs-identifier">utxoByron</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">CC.cvsUtxo</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">byronLedgerState</span><span> </span><a href="#local-6989586621679135122"><span class="hs-identifier hs-var">ledgerByron</span></a><span>
</span><a name="line-371"></a><span>
</span><a name="line-372"></a><span>    </span><span class="hs-identifier">utxoShelley</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.UTxO.html#UTxO"><span class="hs-identifier hs-type">SL.UTxO</span></a><span> </span><a href="#local-6989586621679130958"><span class="hs-identifier hs-type">sc</span></a><span>
</span><a name="line-373"></a><span>    </span><a name="local-6989586621679135134"><a href="#local-6989586621679135134"><span class="hs-identifier">utxoShelley</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#translateUTxOByronToShelley"><span class="hs-identifier hs-var">translateUTxOByronToShelley</span></a><span> </span><a href="#local-6989586621679135133"><span class="hs-identifier hs-var">utxoByron</span></a><span>
</span><a name="line-374"></a><span>
</span><a name="line-375"></a><span>    </span><span class="hs-identifier">ledgerState</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.LedgerState.html#LedgerState"><span class="hs-identifier hs-type">SL.LedgerState</span></a><span> </span><a href="#local-6989586621679130958"><span class="hs-identifier hs-type">sc</span></a><span>
</span><a name="line-376"></a><span>    </span><a name="local-6989586621679135135"><a href="#local-6989586621679135135"><span class="hs-identifier">ledgerState</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.LedgerState.html#LedgerState"><span class="hs-identifier hs-var">SL.LedgerState</span></a><span> </span><span class="hs-special">{</span><span>
</span><a name="line-377"></a><span>        </span><span class="hs-identifier">_utxoState</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.LedgerState.html#UTxOState"><span class="hs-identifier hs-var">SL.UTxOState</span></a><span> </span><span class="hs-special">{</span><span>
</span><a name="line-378"></a><span>            </span><span class="hs-identifier">_utxo</span><span>      </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679135134"><span class="hs-identifier hs-var">utxoShelley</span></a><span>
</span><a name="line-379"></a><span>          </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">_deposited</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.Coin.html#Coin"><span class="hs-identifier hs-var">SL.Coin</span></a><span> </span><span class="hs-number">0</span><span>
</span><a name="line-380"></a><span>          </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">_fees</span><span>      </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.Coin.html#Coin"><span class="hs-identifier hs-var">SL.Coin</span></a><span> </span><span class="hs-number">0</span><span>
</span><a name="line-381"></a><span>          </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">_ppups</span><span>     </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.LedgerState.html#emptyPPUPState"><span class="hs-identifier hs-var">SL.emptyPPUPState</span></a><span>
</span><a name="line-382"></a><span>          </span><span class="hs-special">}</span><span>
</span><a name="line-383"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">_delegationState</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.LedgerState.html#DPState"><span class="hs-identifier hs-var">SL.DPState</span></a><span> </span><span class="hs-special">{</span><span>
</span><a name="line-384"></a><span>          </span><span class="hs-identifier">_dstate</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.LedgerState.html#emptyDState"><span class="hs-identifier hs-var">SL.emptyDState</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">SL._genDelegs</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679135130"><span class="hs-identifier hs-var">genDelegs</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-385"></a><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">_pstate</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.LedgerState.html#emptyPState"><span class="hs-identifier hs-var">SL.emptyPState</span></a><span>
</span><a name="line-386"></a><span>        </span><span class="hs-special">}</span><span>
</span><a name="line-387"></a><span>      </span><span class="hs-special">}</span><span>
</span><a name="line-388"></a><span>
</span><a name="line-389"></a><span>    </span><span class="hs-identifier">ledgerTipShelley</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-network-0.1.0.0/noopt/doc/html/ouroboros-network/src/Ouroboros.Network.Block.html#Point"><span class="hs-identifier hs-type">Point</span></a><span> </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Ledger.Block.html#ShelleyBlock"><span class="hs-identifier hs-type">ShelleyBlock</span></a><span> </span><a href="#local-6989586621679130958"><span class="hs-identifier hs-type">sc</span></a><span class="hs-special">)</span><span>
</span><a name="line-390"></a><span>    </span><a name="local-6989586621679135136"><a href="#local-6989586621679135136"><span class="hs-identifier">ledgerTipShelley</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-391"></a><span>      </span><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#translatePointByronToShelley"><span class="hs-identifier hs-var">translatePointByronToShelley</span></a><span> </span><span class="hs-operator hs-var">$</span><span>
</span><a name="line-392"></a><span>      </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.Ledger.Abstract.html#ledgerTipPoint"><span class="hs-identifier hs-var">ledgerTipPoint</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Proxy</span><span> </span><span class="hs-glyph">@</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-byron-0.1.0.0/noopt/doc/html/ouroboros-consensus-byron/src/Ouroboros.Consensus.Byron.Ledger.Block.html#ByronBlock"><span class="hs-identifier hs-type">ByronBlock</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679135122"><span class="hs-identifier hs-var">ledgerByron</span></a><span>
</span><a name="line-393"></a><span>
</span><a name="line-394"></a><span>    </span><span class="hs-identifier">overlaySchedule</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.OverlaySchedule.html#OverlaySchedule"><span class="hs-identifier hs-type">SL.OverlaySchedule</span></a><span> </span><a href="#local-6989586621679130958"><span class="hs-identifier hs-type">sc</span></a><span>
</span><a name="line-395"></a><span>    </span><a name="local-6989586621679135137"><a href="#local-6989586621679135137"><span class="hs-identifier">overlaySchedule</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-396"></a><span>      </span><span class="hs-identifier hs-var">flip</span><span> </span><span class="hs-identifier hs-var">runReader</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">shelleyLedgerGlobals</span><span> </span><a href="#local-6989586621679135120"><span class="hs-identifier hs-var">cfgShelley</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$</span><span>
</span><a name="line-397"></a><span>        </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.OverlaySchedule.html#overlaySchedule"><span class="hs-identifier hs-var">SL.overlaySchedule</span></a><span>
</span><a name="line-398"></a><span>          </span><a href="#local-6989586621679135121"><span class="hs-identifier hs-var">epochNo</span></a><span>
</span><a name="line-399"></a><span>          </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Map.keysSet</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">sgGenDelegs</span><span> </span><a href="#local-6989586621679135127"><span class="hs-identifier hs-var">genesisShelley</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-400"></a><span>          </span><span class="hs-special">(</span><span class="hs-identifier">sgProtocolParams</span><span> </span><a href="#local-6989586621679135127"><span class="hs-identifier hs-var">genesisShelley</span></a><span class="hs-special">)</span><span>
</span><a name="line-401"></a><span>
</span><a name="line-402"></a><span class="hs-identifier">translateChainDepStateByronToShelleyWrapper</span><span>
</span><a name="line-403"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><a name="local-6989586621679130957"><a href="#local-6989586621679130957"><span class="hs-identifier">sc</span></a></a><span class="hs-operator">.</span><span>
</span><a name="line-404"></a><span>     </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.Util.InPairs.html#RequiringBoth"><span class="hs-identifier hs-type">RequiringBoth</span></a><span>
</span><a name="line-405"></a><span>       </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.TypeFamilyWrappers.html#WrapConsensusConfig"><span class="hs-identifier hs-type">WrapConsensusConfig</span></a><span>
</span><a name="line-406"></a><span>       </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.State.Types.html#Translate"><span class="hs-identifier hs-type">Translate</span></a><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.TypeFamilyWrappers.html#WrapChainDepState"><span class="hs-identifier hs-type">WrapChainDepState</span></a><span class="hs-special">)</span><span>
</span><a name="line-407"></a><span>       </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-byron-0.1.0.0/noopt/doc/html/ouroboros-consensus-byron/src/Ouroboros.Consensus.Byron.Ledger.Block.html#ByronBlock"><span class="hs-identifier hs-type">ByronBlock</span></a><span>
</span><a name="line-408"></a><span>       </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Ledger.Block.html#ShelleyBlock"><span class="hs-identifier hs-type">ShelleyBlock</span></a><span> </span><a href="#local-6989586621679130957"><span class="hs-identifier hs-type">sc</span></a><span class="hs-special">)</span><span>
</span><a name="line-409"></a><a name="translateChainDepStateByronToShelleyWrapper"><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#translateChainDepStateByronToShelleyWrapper"><span class="hs-identifier">translateChainDepStateByronToShelleyWrapper</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-410"></a><span>    </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.Util.InPairs.html#RequireBoth"><span class="hs-identifier hs-var">RequireBoth</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.TypeFamilyWrappers.html#WrapConsensusConfig"><span class="hs-identifier hs-var">WrapConsensusConfig</span></a><span> </span><a name="local-6989586621679135389"><a href="#local-6989586621679135389"><span class="hs-identifier">shelleyCfg</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-411"></a><span>      </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.State.Types.html#Translate"><span class="hs-identifier hs-var">Translate</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.TypeFamilyWrappers.html#WrapChainDepState"><span class="hs-identifier hs-var">WrapChainDepState</span></a><span> </span><a name="local-6989586621679135390"><a href="#local-6989586621679135390"><span class="hs-identifier">pbftState</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-412"></a><span>        </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.TypeFamilyWrappers.html#WrapChainDepState"><span class="hs-identifier hs-var">WrapChainDepState</span></a><span> </span><span class="hs-operator hs-var">$</span><span>
</span><a name="line-413"></a><span>          </span><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#translateChainDepStateByronToShelley"><span class="hs-identifier hs-var">translateChainDepStateByronToShelley</span></a><span> </span><a href="#local-6989586621679135389"><span class="hs-identifier hs-var">shelleyCfg</span></a><span> </span><a href="#local-6989586621679135390"><span class="hs-identifier hs-var">pbftState</span></a><span>
</span><a name="line-414"></a><span>
</span><a name="line-415"></a><span class="hs-identifier">translateChainDepStateByronToShelley</span><span>
</span><a name="line-416"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><a name="local-6989586621679130955"><a href="#local-6989586621679130955"><span class="hs-identifier">bc</span></a></a><span> </span><a name="local-6989586621679130956"><a href="#local-6989586621679130956"><span class="hs-identifier">sc</span></a></a><span class="hs-operator">.</span><span>
</span><a name="line-417"></a><span>     </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.Protocol.Abstract.html#ConsensusConfig"><span class="hs-identifier hs-type">ConsensusConfig</span></a><span> </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Protocol.html#TPraos"><span class="hs-identifier hs-type">TPraos</span></a><span> </span><a href="#local-6989586621679130956"><span class="hs-identifier hs-type">sc</span></a><span class="hs-special">)</span><span>
</span><a name="line-418"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.Protocol.PBFT.State.html#PBftState"><span class="hs-identifier hs-type">PBftState</span></a><span> </span><a href="#local-6989586621679130955"><span class="hs-identifier hs-type">bc</span></a><span>
</span><a name="line-419"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Protocol.State.html#TPraosState"><span class="hs-identifier hs-type">TPraosState</span></a><span> </span><a href="#local-6989586621679130956"><span class="hs-identifier hs-type">sc</span></a><span>
</span><a name="line-420"></a><a name="translateChainDepStateByronToShelley"><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#translateChainDepStateByronToShelley"><span class="hs-identifier">translateChainDepStateByronToShelley</span></a></a><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Protocol.html#TPraosConfig"><span class="hs-identifier hs-var">TPraosConfig</span></a><span> </span><span class="hs-special">{</span><span> </span><a name="local-6989586621679135391"><a href="#local-6989586621679135391"><span class="hs-identifier">tpraosParams</span></a></a><span> </span><span class="hs-special">}</span><span> </span><a name="local-6989586621679135392"><a href="#local-6989586621679135392"><span class="hs-identifier">pbftState</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-421"></a><span>    </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Protocol.State.html#empty"><span class="hs-identifier hs-var">TPraosState.empty</span></a><span> </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.Protocol.PBFT.State.html#tipSlot"><span class="hs-identifier hs-var">PBftState.tipSlot</span></a><span> </span><a href="#local-6989586621679135392"><span class="hs-identifier hs-var">pbftState</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$</span><span>
</span><a name="line-422"></a><span>      </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.API.Protocol.html#ChainDepState"><span class="hs-identifier hs-var">SL.ChainDepState</span></a><span>
</span><a name="line-423"></a><span>        </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">SL.csProtocol</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.STS.Prtcl.html#PrtclState"><span class="hs-identifier hs-var">SL.PrtclState</span></a><span> </span><span class="hs-identifier hs-var">Map.empty</span><span> </span><a href="#local-6989586621679135393"><span class="hs-identifier hs-var">nonce</span></a><span> </span><a href="#local-6989586621679135393"><span class="hs-identifier hs-var">nonce</span></a><span>
</span><a name="line-424"></a><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">SL.csTickn</span><span>    </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.STS.Tickn.html#TicknState"><span class="hs-identifier hs-var">SL.TicknState</span></a><span> </span><span class="hs-special">{</span><span>
</span><a name="line-425"></a><span>              </span><span class="hs-identifier">ticknStateEpochNonce</span><span>    </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679135393"><span class="hs-identifier hs-var">nonce</span></a><span>
</span><a name="line-426"></a><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ticknStatePrevHashNonce</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.BaseTypes.html#NeutralNonce"><span class="hs-identifier hs-var">SL.NeutralNonce</span></a><span>
</span><a name="line-427"></a><span>            </span><span class="hs-special">}</span><span>
</span><a name="line-428"></a><span>          </span><span class="hs-comment">-- Overridden before used</span><span>
</span><a name="line-429"></a><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">SL.csLabNonce</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.BaseTypes.html#NeutralNonce"><span class="hs-identifier hs-var">SL.NeutralNonce</span></a><span>
</span><a name="line-430"></a><span>        </span><span class="hs-special">}</span><span>
</span><a name="line-431"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-432"></a><span>    </span><a name="local-6989586621679135393"><a href="#local-6989586621679135393"><span class="hs-identifier">nonce</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">tpraosInitialNonce</span><span> </span><a href="#local-6989586621679135391"><span class="hs-identifier hs-var">tpraosParams</span></a><span>
</span><a name="line-433"></a><span>
</span><a name="line-434"></a><span class="hs-identifier">translateLedgerViewByronToShelleyWrapper</span><span>
</span><a name="line-435"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><a name="local-6989586621679130954"><a href="#local-6989586621679130954"><span class="hs-identifier">sc</span></a></a><span class="hs-operator">.</span><span>
</span><a name="line-436"></a><span>     </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.Util.InPairs.html#RequiringBoth"><span class="hs-identifier hs-type">RequiringBoth</span></a><span>
</span><a name="line-437"></a><span>       </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.TypeFamilyWrappers.html#WrapLedgerConfig"><span class="hs-identifier hs-type">WrapLedgerConfig</span></a><span>
</span><a name="line-438"></a><span>       </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.State.Types.html#TranslateForecast"><span class="hs-identifier hs-type">TranslateForecast</span></a><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.TypeFamilyWrappers.html#WrapLedgerView"><span class="hs-identifier hs-type">WrapLedgerView</span></a><span class="hs-special">)</span><span>
</span><a name="line-439"></a><span>       </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-byron-0.1.0.0/noopt/doc/html/ouroboros-consensus-byron/src/Ouroboros.Consensus.Byron.Ledger.Block.html#ByronBlock"><span class="hs-identifier hs-type">ByronBlock</span></a><span>
</span><a name="line-440"></a><span>       </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Ledger.Block.html#ShelleyBlock"><span class="hs-identifier hs-type">ShelleyBlock</span></a><span> </span><a href="#local-6989586621679130954"><span class="hs-identifier hs-type">sc</span></a><span class="hs-special">)</span><span>
</span><a name="line-441"></a><a name="translateLedgerViewByronToShelleyWrapper"><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#translateLedgerViewByronToShelleyWrapper"><span class="hs-identifier">translateLedgerViewByronToShelleyWrapper</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-442"></a><span>    </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.Util.InPairs.html#RequireBoth"><span class="hs-identifier hs-var">RequireBoth</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.TypeFamilyWrappers.html#WrapLedgerConfig"><span class="hs-identifier hs-var">WrapLedgerConfig</span></a><span> </span><a name="local-6989586621679135401"><a href="#local-6989586621679135401"><span class="hs-identifier">shelleyCfg</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-443"></a><span>      </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.HardFork.Combinator.State.Types.html#TranslateForecast"><span class="hs-identifier hs-var">TranslateForecast</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679135402"><a href="#local-6989586621679135402"><span class="hs-identifier">epochNo</span></a></a><span> </span><a name="local-6989586621679135403"><a href="#local-6989586621679135403"><span class="hs-identifier">_forecastFor</span></a></a><span> </span><a name="local-6989586621679135404"><a href="#local-6989586621679135404"><span class="hs-identifier">_finalByronView</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-444"></a><span>        </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.TypeFamilyWrappers.html#WrapTickedLedgerView"><span class="hs-identifier hs-var">WrapTickedLedgerView</span></a><span> </span><span class="hs-operator hs-var">$</span><span>
</span><a name="line-445"></a><span>          </span><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#translateLedgerViewByronToShelley"><span class="hs-identifier hs-var">translateLedgerViewByronToShelley</span></a><span> </span><a href="#local-6989586621679135401"><span class="hs-identifier hs-var">shelleyCfg</span></a><span> </span><a href="#local-6989586621679135402"><span class="hs-identifier hs-var">epochNo</span></a><span>
</span><a name="line-446"></a><span>
</span><a name="line-447"></a><span class="hs-comment">-- | We construct a 'SL.LedgerView' using the Shelley genesis config in the</span><span>
</span><a name="line-448"></a><span class="hs-comment">-- same way as 'translateLedgerStateByronToShelley'.</span><span>
</span><a name="line-449"></a><span class="hs-identifier">translateLedgerViewByronToShelley</span><span>
</span><a name="line-450"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><a name="local-6989586621679130953"><a href="#local-6989586621679130953"><span class="hs-identifier">sc</span></a></a><span class="hs-operator">.</span><span>
</span><a name="line-451"></a><span>     </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.Ledger.Basics.html#LedgerConfig"><span class="hs-identifier hs-type">LedgerConfig</span></a><span> </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Ledger.Block.html#ShelleyBlock"><span class="hs-identifier hs-type">ShelleyBlock</span></a><span> </span><a href="#local-6989586621679130953"><span class="hs-identifier hs-type">sc</span></a><span class="hs-special">)</span><span>
</span><a name="line-452"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-slotting-0.1.0.0/noopt/doc/html/cardano-slotting/src/Cardano.Slotting.Slot.html#EpochNo"><span class="hs-identifier hs-type">EpochNo</span></a><span>
</span><a name="line-453"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src/Ouroboros.Consensus.Ticked.html#Ticked"><span class="hs-identifier hs-type">Ticked</span></a><span> </span><span class="hs-special">(</span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.API.Protocol.html#LedgerView"><span class="hs-identifier hs-type">SL.LedgerView</span></a><span> </span><a href="#local-6989586621679130953"><span class="hs-identifier hs-type">sc</span></a><span class="hs-special">)</span><span>
</span><a name="line-454"></a><a name="translateLedgerViewByronToShelley"><a href="Ouroboros.Consensus.Cardano.CanHardFork.html#translateLedgerViewByronToShelley"><span class="hs-identifier">translateLedgerViewByronToShelley</span></a></a><span> </span><a name="local-6989586621679135405"><a href="#local-6989586621679135405"><span class="hs-identifier">shelleyCfg</span></a></a><span> </span><a name="local-6989586621679135406"><a href="#local-6989586621679135406"><span class="hs-identifier">epochNo</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Protocol.html#TickedPraosLedgerView"><span class="hs-identifier hs-var">TickedPraosLedgerView</span></a><span> </span><span class="hs-operator hs-var">$</span><span>
</span><a name="line-455"></a><span>    </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.API.Protocol.html#LedgerView"><span class="hs-identifier hs-var">SL.LedgerView</span></a><span> </span><span class="hs-special">{</span><span>
</span><a name="line-456"></a><span>        </span><span class="hs-identifier">lvProtParams</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">sgProtocolParams</span><span> </span><a href="#local-6989586621679135407"><span class="hs-identifier hs-var">genesisShelley</span></a><span>
</span><a name="line-457"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">lvOverlaySched</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679135409"><span class="hs-identifier hs-var">overlaySchedule</span></a><span>
</span><a name="line-458"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">lvPoolDistr</span><span>    </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.Delegation.Certificates.html#PoolDistr"><span class="hs-identifier hs-var">SL.PoolDistr</span></a><span> </span><span class="hs-identifier hs-var">Map.empty</span><span>
</span><a name="line-459"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">lvGenDelegs</span><span>    </span><span class="hs-glyph">=</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.Keys.html#GenDelegs"><span class="hs-identifier hs-var">SL.GenDelegs</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">sgGenDelegs</span><span> </span><a href="#local-6989586621679135407"><span class="hs-identifier hs-var">genesisShelley</span></a><span>
</span><a name="line-460"></a><span>      </span><span class="hs-special">}</span><span>
</span><a name="line-461"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-462"></a><span>    </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src/Ouroboros.Consensus.Shelley.Ledger.Ledger.html#ShelleyLedgerConfig"><span class="hs-identifier hs-var">ShelleyLedgerConfig</span></a><span> </span><span class="hs-special">{</span><span>
</span><a name="line-463"></a><span>        </span><span class="hs-identifier">shelleyLedgerGenesis</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621679135407"><a href="#local-6989586621679135407"><span class="hs-identifier">genesisShelley</span></a></a><span>
</span><a name="line-464"></a><span>      </span><span class="hs-special">,</span><span> </span><a name="local-6989586621679135408"><a href="#local-6989586621679135408"><span class="hs-identifier">shelleyLedgerGlobals</span></a></a><span>
</span><a name="line-465"></a><span>      </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679135405"><span class="hs-identifier hs-var">shelleyCfg</span></a><span>
</span><a name="line-466"></a><span>
</span><a name="line-467"></a><span>    </span><span class="hs-identifier">overlaySchedule</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.OverlaySchedule.html#OverlaySchedule"><span class="hs-identifier hs-type">SL.OverlaySchedule</span></a><span> </span><a href="#local-6989586621679130953"><span class="hs-identifier hs-type">sc</span></a><span>
</span><a name="line-468"></a><span>    </span><a name="local-6989586621679135409"><a href="#local-6989586621679135409"><span class="hs-identifier">overlaySchedule</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-469"></a><span>      </span><span class="hs-identifier hs-var">flip</span><span> </span><span class="hs-identifier hs-var">runReader</span><span> </span><a href="#local-6989586621679135408"><span class="hs-identifier hs-var">shelleyLedgerGlobals</span></a><span> </span><span class="hs-operator hs-var">$</span><span>
</span><a name="line-470"></a><span>        </span><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/shelley-spec-ledger-0.1.0.0/noopt/doc/html/shelley-spec-ledger/src/Shelley.Spec.Ledger.OverlaySchedule.html#overlaySchedule"><span class="hs-identifier hs-var">SL.overlaySchedule</span></a><span>
</span><a name="line-471"></a><span>          </span><a href="#local-6989586621679135406"><span class="hs-identifier hs-var">epochNo</span></a><span>
</span><a name="line-472"></a><span>          </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Map.keysSet</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">sgGenDelegs</span><span> </span><a href="#local-6989586621679135407"><span class="hs-identifier hs-var">genesisShelley</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-473"></a><span>          </span><span class="hs-special">(</span><span class="hs-identifier">sgProtocolParams</span><span> </span><a href="#local-6989586621679135407"><span class="hs-identifier hs-var">genesisShelley</span></a><span class="hs-special">)</span><span>
</span><a name="line-474"></a></pre></body></html>