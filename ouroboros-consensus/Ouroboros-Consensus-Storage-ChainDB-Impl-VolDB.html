<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html">Source</a></li><li><a href="&quot;../index.html&quot;">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">ouroboros-consensus-0.1.0.0: Consensus layer for the Ouroboros blockchain protocol</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Initialization</a></li><li><a href="#g:2">Candidates</a></li><li><a href="#g:3">Paths</a></li><li><a href="#g:4">Getting and parsing blocks</a></li><li><a href="#g:5">Wrappers</a></li><li><a href="#g:6">Tracing</a></li><li><a href="#g:7">Re-exports</a></li><li><a href="#g:8">Exported for testing purposes</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Thin wrapper around the VolatileDB</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:VolDB">VolDB</a> m blk</li><li class="src short"><span class="keyword">class</span> (<a href="Ouroboros-Consensus-Storage-ChainDB-Serialisation.html#t:EncodeDisk" title="Ouroboros.Consensus.Storage.ChainDB.Serialisation">EncodeDisk</a> blk blk, <a href="Ouroboros-Consensus-Storage-ChainDB-Serialisation.html#t:DecodeDisk" title="Ouroboros.Consensus.Storage.ChainDB.Serialisation">DecodeDisk</a> blk (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> &#8594; blk), <a href="Ouroboros-Consensus-Storage-ChainDB-Serialisation.html#t:DecodeDiskDep" title="Ouroboros.Consensus.Storage.ChainDB.Serialisation">DecodeDiskDep</a> (<a href="Ouroboros-Consensus-Block-NestedContent.html#t:NestedCtxt" title="Ouroboros.Consensus.Block.NestedContent">NestedCtxt</a> <a href="Ouroboros-Consensus-Block-Abstract.html#t:Header" title="Ouroboros.Consensus.Block.Abstract">Header</a>) blk, <a href="Ouroboros-Consensus-Storage-ChainDB-Serialisation.html#t:ReconstructNestedCtxt" title="Ouroboros.Consensus.Storage.ChainDB.Serialisation">ReconstructNestedCtxt</a> <a href="Ouroboros-Consensus-Block-Abstract.html#t:Header" title="Ouroboros.Consensus.Block.Abstract">Header</a> blk, <a href="Ouroboros-Consensus-Storage-ChainDB-Serialisation.html#t:HasBinaryBlockInfo" title="Ouroboros.Consensus.Storage.ChainDB.Serialisation">HasBinaryBlockInfo</a> blk) &#8658; <a href="#t:VolDbSerialiseConstraints">VolDbSerialiseConstraints</a> blk</li><li class="src short"><span class="keyword">data</span> <a href="#t:VolDbArgs">VolDbArgs</a> m blk = <a href="#v:VolDbArgs">VolDbArgs</a> {<ul class="subs"><li><a href="#v:volHasFS">volHasFS</a> &#8759; <a href="Ouroboros-Consensus-Storage-FS-API.html#t:SomeHasFS" title="Ouroboros.Consensus.Storage.FS.API">SomeHasFS</a> m</li><li><a href="#v:volCheckIntegrity">volCheckIntegrity</a> &#8759; blk &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li><a href="#v:volBlocksPerFile">volBlocksPerFile</a> &#8759; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:BlocksPerFile" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">BlocksPerFile</a></li><li><a href="#v:volCodecConfig">volCodecConfig</a> &#8759; <a href="Ouroboros-Consensus-Block-Abstract.html#t:CodecConfig" title="Ouroboros.Consensus.Block.Abstract">CodecConfig</a> blk</li><li><a href="#v:volValidation">volValidation</a> &#8759; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:BlockValidationPolicy" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">BlockValidationPolicy</a></li><li><a href="#v:volTracer">volTracer</a> &#8759; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/contra-tracer-0.1.0.0/noopt/doc/html/contra-tracer/Control-Tracer.html#t:Tracer" title="Control.Tracer">Tracer</a> m (<a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:TraceEvent" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">TraceEvent</a> blk)</li></ul>}</li><li class="src short"><a href="#v:defaultArgs">defaultArgs</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> &#8594; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDbArgs" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDbArgs</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> blk</li><li class="src short"><a href="#v:openDB">openDB</a> &#8759; &#8704; m blk. (<a href="Ouroboros-Consensus-Util-IOLike.html#t:IOLike" title="Ouroboros.Consensus.Util.IOLike">IOLike</a> m, <a href="Ouroboros-Consensus-Block-Abstract.html#t:GetPrevHash" title="Ouroboros.Consensus.Block.Abstract">GetPrevHash</a> blk, <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDbSerialiseConstraints" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDbSerialiseConstraints</a> blk) &#8658; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDbArgs" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDbArgs</a> m blk &#8594; m (<a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk)</li><li class="src short"><span class="keyword">type</span> <a href="#t:LookupBlockInfo">LookupBlockInfo</a> blk = <a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> (<a href="Ouroboros-Consensus-Storage-VolatileDB-Types.html#t:BlockInfo" title="Ouroboros.Consensus.Storage.VolatileDB.Types">BlockInfo</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk))</li><li class="src short"><a href="#v:candidates">candidates</a> &#8759; &#8704; blk. (<a href="Ouroboros-Consensus-Block-Abstract.html#t:WithOrigin" title="Ouroboros.Consensus.Block.Abstract">WithOrigin</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk) &#8594; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:Set" title="Cardano.Prelude.Base">Set</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk)) &#8594; <a href="Ouroboros-Consensus-Block-Abstract.html#t:Point" title="Ouroboros.Consensus.Block.Abstract">Point</a> blk &#8594; [<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk)]</li><li class="src short"><a href="#v:extendWithSuccessors">extendWithSuccessors</a> &#8759; &#8704; blk. <a href="Ouroboros-Consensus-Block-Abstract.html#t:HasHeader" title="Ouroboros.Consensus.Block.Abstract">HasHeader</a> blk &#8658; (<a href="Ouroboros-Consensus-Block-Abstract.html#t:WithOrigin" title="Ouroboros.Consensus.Block.Abstract">WithOrigin</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk) &#8594; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:Set" title="Cardano.Prelude.Base">Set</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk)) &#8594; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:LookupBlockInfo" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">LookupBlockInfo</a> blk &#8594; <a href="Ouroboros-Consensus-Fragment-Diff.html#t:ChainDiff" title="Ouroboros.Consensus.Fragment.Diff">ChainDiff</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderFields" title="Ouroboros.Consensus.Block.Abstract">HeaderFields</a> blk) &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> (<a href="Ouroboros-Consensus-Fragment-Diff.html#t:ChainDiff" title="Ouroboros.Consensus.Fragment.Diff">ChainDiff</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderFields" title="Ouroboros.Consensus.Block.Abstract">HeaderFields</a> blk))</li><li class="src short"><a href="#v:isReachable">isReachable</a> &#8759; &#8704; blk. (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HasHeader" title="Ouroboros.Consensus.Block.Abstract">HasHeader</a> blk, <a href="Ouroboros-Consensus-Block-Abstract.html#t:GetHeader" title="Ouroboros.Consensus.Block.Abstract">GetHeader</a> blk, <a href="Ouroboros-Consensus-Util-CallStack.html#t:HasCallStack" title="Ouroboros.Consensus.Util.CallStack">HasCallStack</a>) &#8658; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:LookupBlockInfo" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">LookupBlockInfo</a> blk &#8594; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-network-0.1.0.0/noopt/doc/html/ouroboros-network/Ouroboros-Network-AnchoredFragment.html#t:AnchoredFragment" title="Ouroboros.Network.AnchoredFragment">AnchoredFragment</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:Header" title="Ouroboros.Consensus.Block.Abstract">Header</a> blk) &#8594; <a href="Ouroboros-Consensus-Block-RealPoint.html#t:RealPoint" title="Ouroboros.Consensus.Block.RealPoint">RealPoint</a> blk &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> (<a href="Ouroboros-Consensus-Fragment-Diff.html#t:ChainDiff" title="Ouroboros.Consensus.Fragment.Diff">ChainDiff</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderFields" title="Ouroboros.Consensus.Block.Abstract">HeaderFields</a> blk))</li><li class="src short"><span class="keyword">data</span> <a href="#t:Path">Path</a> blk<ul class="subs"><li>= <a href="#v:NotInVolDB">NotInVolDB</a> (<a href="Ouroboros-Consensus-Block-RealPoint.html#t:RealPoint" title="Ouroboros.Consensus.Block.RealPoint">RealPoint</a> blk)</li><li>| <a href="#v:CompletelyInVolDB">CompletelyInVolDB</a> [<a href="Ouroboros-Consensus-Block-RealPoint.html#t:RealPoint" title="Ouroboros.Consensus.Block.RealPoint">RealPoint</a> blk]</li><li>| <a href="#v:PartiallyInVolDB">PartiallyInVolDB</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk) [<a href="Ouroboros-Consensus-Block-RealPoint.html#t:RealPoint" title="Ouroboros.Consensus.Block.RealPoint">RealPoint</a> blk]</li></ul></li><li class="src short"><a href="#v:computePath">computePath</a> &#8759; &#8704; blk. <a href="Ouroboros-Consensus-Block-Abstract.html#t:HasHeader" title="Ouroboros.Consensus.Block.Abstract">HasHeader</a> blk &#8658; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:LookupBlockInfo" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">LookupBlockInfo</a> blk &#8594; <a href="Ouroboros-Consensus-Storage-ChainDB-API.html#t:StreamFrom" title="Ouroboros.Consensus.Storage.ChainDB.API">StreamFrom</a> blk &#8594; <a href="Ouroboros-Consensus-Storage-ChainDB-API.html#t:StreamTo" title="Ouroboros.Consensus.Storage.ChainDB.API">StreamTo</a> blk &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> (<a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:Path" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">Path</a> blk)</li><li class="src short"><a href="#v:computePathSTM">computePathSTM</a> &#8759; &#8704; m blk. (<a href="Ouroboros-Consensus-Util-IOLike.html#t:IOLike" title="Ouroboros.Consensus.Util.IOLike">IOLike</a> m, <a href="Ouroboros-Consensus-Block-Abstract.html#t:HasHeader" title="Ouroboros.Consensus.Block.Abstract">HasHeader</a> blk) &#8658; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk &#8594; <a href="Ouroboros-Consensus-Storage-ChainDB-API.html#t:StreamFrom" title="Ouroboros.Consensus.Storage.ChainDB.API">StreamFrom</a> blk &#8594; <a href="Ouroboros-Consensus-Storage-ChainDB-API.html#t:StreamTo" title="Ouroboros.Consensus.Storage.ChainDB.API">StreamTo</a> blk &#8594; <a href="Ouroboros-Consensus-Util-MonadSTM-NormalForm.html#t:STM" title="Ouroboros.Consensus.Util.MonadSTM.NormalForm">STM</a> m (<a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:Path" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">Path</a> blk)</li><li class="src short"><span class="keyword">type</span> <a href="#t:BlockFileParserError">BlockFileParserError</a> hash = <a href="Ouroboros-Consensus-Storage-VolatileDB-Types.html#t:ParserError" title="Ouroboros.Consensus.Storage.VolatileDB.Types">ParserError</a> hash <a href="Ouroboros-Consensus-Util-CBOR.html#t:ReadIncrementalErr" title="Ouroboros.Consensus.Util.CBOR">ReadIncrementalErr</a></li><li class="src short"><a href="#v:getKnownBlock">getKnownBlock</a> &#8759; (<a href="Ouroboros-Consensus-Util-IOLike.html#t:MonadCatch" title="Ouroboros.Consensus.Util.IOLike">MonadCatch</a> m, <a href="Ouroboros-Consensus-Block-Abstract.html#t:HasHeader" title="Ouroboros.Consensus.Block.Abstract">HasHeader</a> blk, <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDbSerialiseConstraints" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDbSerialiseConstraints</a> blk) &#8658; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk &#8594; <a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk &#8594; m blk</li><li class="src short"><a href="#v:getKnownHeader">getKnownHeader</a> &#8759; (<a href="Ouroboros-Consensus-Util-IOLike.html#t:MonadCatch" title="Ouroboros.Consensus.Util.IOLike">MonadCatch</a> m, <a href="Ouroboros-Consensus-Block-Abstract.html#t:HasHeader" title="Ouroboros.Consensus.Block.Abstract">HasHeader</a> blk, <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDbSerialiseConstraints" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDbSerialiseConstraints</a> blk) &#8658; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk &#8594; <a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk &#8594; m (<a href="Ouroboros-Consensus-Block-Abstract.html#t:Header" title="Ouroboros.Consensus.Block.Abstract">Header</a> blk)</li><li class="src short"><a href="#v:getKnownBlockComponent">getKnownBlockComponent</a> &#8759; (<a href="Ouroboros-Consensus-Util-IOLike.html#t:MonadCatch" title="Ouroboros.Consensus.Util.IOLike">MonadCatch</a> m, <a href="Ouroboros-Consensus-Block-Abstract.html#t:HasHeader" title="Ouroboros.Consensus.Block.Abstract">HasHeader</a> blk, <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDbSerialiseConstraints" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDbSerialiseConstraints</a> blk) &#8658; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk &#8594; <a href="Ouroboros-Consensus-Storage-Common.html#t:BlockComponent" title="Ouroboros.Consensus.Storage.Common">BlockComponent</a> (<a href="Ouroboros-Consensus-Storage-ChainDB-API.html#t:ChainDB" title="Ouroboros.Consensus.Storage.ChainDB.API">ChainDB</a> m blk) b &#8594; <a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk &#8594; m b</li><li class="src short"><a href="#v:getBlockComponent">getBlockComponent</a> &#8759; &#8704; m blk b. (<a href="Ouroboros-Consensus-Util-IOLike.html#t:MonadCatch" title="Ouroboros.Consensus.Util.IOLike">MonadCatch</a> m, <a href="Ouroboros-Consensus-Block-Abstract.html#t:HasHeader" title="Ouroboros.Consensus.Block.Abstract">HasHeader</a> blk, <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDbSerialiseConstraints" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDbSerialiseConstraints</a> blk) &#8658; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk &#8594; <a href="Ouroboros-Consensus-Storage-Common.html#t:BlockComponent" title="Ouroboros.Consensus.Storage.Common">BlockComponent</a> (<a href="Ouroboros-Consensus-Storage-ChainDB-API.html#t:ChainDB" title="Ouroboros.Consensus.Storage.ChainDB.API">ChainDB</a> m blk) b &#8594; <a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk &#8594; m (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> b)</li><li class="src short"><a href="#v:getBlockInfo">getBlockInfo</a> &#8759; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk &#8594; <a href="Ouroboros-Consensus-Util-MonadSTM-NormalForm.html#t:STM" title="Ouroboros.Consensus.Util.MonadSTM.NormalForm">STM</a> m (<a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:LookupBlockInfo" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">LookupBlockInfo</a> blk)</li><li class="src short"><a href="#v:getIsMember">getIsMember</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> (<a href="Ouroboros-Consensus-Util-MonadSTM-NormalForm.html#t:STM" title="Ouroboros.Consensus.Util.MonadSTM.NormalForm">STM</a> m) &#8658; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk &#8594; <a href="Ouroboros-Consensus-Util-MonadSTM-NormalForm.html#t:STM" title="Ouroboros.Consensus.Util.MonadSTM.NormalForm">STM</a> m (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>)</li><li class="src short"><a href="#v:getPredecessor">getPredecessor</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> (<a href="Ouroboros-Consensus-Util-MonadSTM-NormalForm.html#t:STM" title="Ouroboros.Consensus.Util.MonadSTM.NormalForm">STM</a> m) &#8658; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk &#8594; <a href="Ouroboros-Consensus-Util-MonadSTM-NormalForm.html#t:STM" title="Ouroboros.Consensus.Util.MonadSTM.NormalForm">STM</a> m (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:WithOrigin" title="Ouroboros.Consensus.Block.Abstract">WithOrigin</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk)))</li><li class="src short"><a href="#v:filterByPredecessor">filterByPredecessor</a> &#8759; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk &#8594; <a href="Ouroboros-Consensus-Util-MonadSTM-NormalForm.html#t:STM" title="Ouroboros.Consensus.Util.MonadSTM.NormalForm">STM</a> m (<a href="Ouroboros-Consensus-Block-Abstract.html#t:WithOrigin" title="Ouroboros.Consensus.Block.Abstract">WithOrigin</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk) &#8594; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:Set" title="Cardano.Prelude.Base">Set</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk))</li><li class="src short"><a href="#v:getMaxSlotNo">getMaxSlotNo</a> &#8759; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk &#8594; <a href="Ouroboros-Consensus-Util-MonadSTM-NormalForm.html#t:STM" title="Ouroboros.Consensus.Util.MonadSTM.NormalForm">STM</a> m <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-network-0.1.0.0/noopt/doc/html/ouroboros-network/Ouroboros-Network-Block.html#t:MaxSlotNo" title="Ouroboros.Network.Block">MaxSlotNo</a></li><li class="src short"><a href="#v:putBlock">putBlock</a> &#8759; (<a href="Ouroboros-Consensus-Util-IOLike.html#t:MonadCatch" title="Ouroboros.Consensus.Util.IOLike">MonadCatch</a> m, <a href="Ouroboros-Consensus-Block-Abstract.html#t:GetPrevHash" title="Ouroboros.Consensus.Block.Abstract">GetPrevHash</a> blk, <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDbSerialiseConstraints" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDbSerialiseConstraints</a> blk) &#8658; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk &#8594; blk &#8594; m ()</li><li class="src short"><a href="#v:closeDB">closeDB</a> &#8759; (<a href="Ouroboros-Consensus-Util-IOLike.html#t:MonadCatch" title="Ouroboros.Consensus.Util.IOLike">MonadCatch</a> m, <a href="Ouroboros-Consensus-Util-CallStack.html#t:HasCallStack" title="Ouroboros.Consensus.Util.CallStack">HasCallStack</a>) &#8658; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk &#8594; m ()</li><li class="src short"><a href="#v:garbageCollect">garbageCollect</a> &#8759; <a href="Ouroboros-Consensus-Util-IOLike.html#t:MonadCatch" title="Ouroboros.Consensus.Util.IOLike">MonadCatch</a> m &#8658; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk &#8594; <a href="Ouroboros-Consensus-Block-Abstract.html#t:SlotNo" title="Ouroboros.Consensus.Block.Abstract">SlotNo</a> &#8594; m ()</li><li class="src short"><span class="keyword">type</span> <a href="#t:TraceEvent">TraceEvent</a> blk = <a href="Ouroboros-Consensus-Storage-VolatileDB-Types.html#t:TraceEvent" title="Ouroboros.Consensus.Storage.VolatileDB.Types">TraceEvent</a> <a href="Ouroboros-Consensus-Util-CBOR.html#t:ReadIncrementalErr" title="Ouroboros.Consensus.Util.CBOR">ReadIncrementalErr</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk)</li><li class="src short"><span class="keyword">data</span> <a href="#t:VolatileDBError">VolatileDBError</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:BlockValidationPolicy">BlockValidationPolicy</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:BlocksPerFile">BlocksPerFile</a></li><li class="src short"><a href="#v:mkVolDB">mkVolDB</a> &#8759; <a href="Ouroboros-Consensus-Storage-VolatileDB-API.html#t:VolatileDB" title="Ouroboros.Consensus.Storage.VolatileDB.API">VolatileDB</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk) m &#8594; <a href="Ouroboros-Consensus-Block-Abstract.html#t:CodecConfig" title="Ouroboros.Consensus.Block.Abstract">CodecConfig</a> blk &#8594; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk</li><li class="src short"><a href="#v:blockFileParser-39-">blockFileParser'</a> &#8759; &#8704; m blk h. (<a href="Ouroboros-Consensus-Util-IOLike.html#t:IOLike" title="Ouroboros.Consensus.Util.IOLike">IOLike</a> m, <a href="Ouroboros-Consensus-Block-Abstract.html#t:GetPrevHash" title="Ouroboros.Consensus.Block.Abstract">GetPrevHash</a> blk, <a href="Ouroboros-Consensus-Storage-ChainDB-Serialisation.html#t:HasBinaryBlockInfo" title="Ouroboros.Consensus.Storage.ChainDB.Serialisation">HasBinaryBlockInfo</a> blk) &#8658; <a href="Ouroboros-Consensus-Block-Abstract.html#t:CodecConfig" title="Ouroboros.Consensus.Block.Abstract">CodecConfig</a> blk &#8594; <a href="Ouroboros-Consensus-Storage-FS-API.html#t:HasFS" title="Ouroboros.Consensus.Storage.FS.API">HasFS</a> m h &#8594; (&#8704; s. Decoder s (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> &#8594; (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString-Short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a>, blk))) &#8594; (blk &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) &#8594; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:BlockValidationPolicy" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">BlockValidationPolicy</a> &#8594; <a href="Ouroboros-Consensus-Storage-VolatileDB-Types.html#t:Parser" title="Ouroboros.Consensus.Storage.VolatileDB.Types">Parser</a> <a href="Ouroboros-Consensus-Util-CBOR.html#t:ReadIncrementalErr" title="Ouroboros.Consensus.Util.CBOR">ReadIncrementalErr</a> m (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk)</li><li class="src short"><a href="#v:fromChainHash">fromChainHash</a> &#8759; <a href="Ouroboros-Consensus-Block-Abstract.html#t:ChainHash" title="Ouroboros.Consensus.Block.Abstract">ChainHash</a> blk &#8594; <a href="Ouroboros-Consensus-Block-Abstract.html#t:WithOrigin" title="Ouroboros.Consensus.Block.Abstract">WithOrigin</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk)</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:VolDB" class="def">VolDB</a> m blk <a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html#VolDB" class="link">Source</a> <a href="#t:VolDB" class="selflink">#</a></p><div class="doc"><p>Thin wrapper around the VolatileDB (opaque type)</p><p>The intention is that all interaction with the VolatileDB goes through this
 module.</p></div><div class="subs instances"><details id="i:VolDB" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:VolDB:Generic:1"></span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Generic" title="GHC.Generics">Generic</a> (<a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk)</span> <a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html#line-117" class="link">Source</a> <a href="#t:VolDB" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:VolDB:Generic:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html">Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk) &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> <a href="#t:Rep" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:from">from</a> &#8759; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk) x <a href="#v:from" class="selflink">#</a></p><p class="src"><a href="#v:to">to</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk) x &#8594; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk <a href="#v:to" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:VolDB:NoUnexpectedThunks:2"></span> <a href="Ouroboros-Consensus-Util-IOLike.html#t:NoUnexpectedThunks" title="Ouroboros.Consensus.Util.IOLike">NoUnexpectedThunks</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:CodecConfig" title="Ouroboros.Consensus.Block.Abstract">CodecConfig</a> blk) &#8658; <a href="Ouroboros-Consensus-Util-IOLike.html#t:NoUnexpectedThunks" title="Ouroboros.Consensus.Util.IOLike">NoUnexpectedThunks</a> (<a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk)</span> <a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html#line-119" class="link">Source</a> <a href="#t:VolDB" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:VolDB:NoUnexpectedThunks:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html">Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:noUnexpectedThunks">noUnexpectedThunks</a> &#8759; [<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>] &#8594; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-GHC-Heap-NormalForm-Classy.html#t:ThunkInfo" title="Cardano.Prelude.GHC.Heap.NormalForm.Classy">ThunkInfo</a> <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src" class="link">Source</a> <a href="#v:noUnexpectedThunks" class="selflink">#</a></p><p class="src"><a href="#v:whnfNoUnexpectedThunks">whnfNoUnexpectedThunks</a> &#8759; [<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>] &#8594; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-GHC-Heap-NormalForm-Classy.html#t:ThunkInfo" title="Cardano.Prelude.GHC.Heap.NormalForm.Classy">ThunkInfo</a> <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src" class="link">Source</a> <a href="#v:whnfNoUnexpectedThunks" class="selflink">#</a></p><p class="src"><a href="#v:showTypeOf">showTypeOf</a> &#8759; <a href="Data-SOP-Strict.html#t:Proxy" title="Data.SOP.Strict">Proxy</a> (<a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk) &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/src" class="link">Source</a> <a href="#v:showTypeOf" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:VolDB:Rep:3"></span> <span class="keyword">type</span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk)</span> <a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html#line-117" class="link">Source</a> <a href="#t:VolDB" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:VolDB:Rep:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html">Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB</a></p> <div class="src"><span class="keyword">type</span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk) = <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:D1" title="GHC.Generics">D1</a> (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:MetaData" title="GHC.Generics">MetaData</a> &quot;VolDB&quot; &quot;Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB&quot; &quot;ouroboros-consensus-0.1.0.0-inplace&quot; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#v:False" title="Data.Bool">False</a>) (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:C1" title="GHC.Generics">C1</a> (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:MetaCons" title="GHC.Generics">MetaCons</a> &quot;VolDB&quot; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:PrefixI" title="GHC.Generics">PrefixI</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#v:True" title="Data.Bool">True</a>) (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#v:Just" title="GHC.Maybe">Just</a> &quot;volDB&quot;) <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:SourceStrict" title="GHC.Generics">SourceStrict</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:DecidedStrict" title="GHC.Generics">DecidedStrict</a>) (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> (<a href="Ouroboros-Consensus-Storage-VolatileDB-API.html#t:VolatileDB" title="Ouroboros.Consensus.Storage.VolatileDB.API">VolatileDB</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk) m)) <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t::-42-:" title="GHC.Generics">:*:</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#v:Just" title="GHC.Maybe">Just</a> &quot;codecConfig&quot;) <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:SourceStrict" title="GHC.Generics">SourceStrict</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:DecidedStrict" title="GHC.Generics">DecidedStrict</a>) (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:CodecConfig" title="Ouroboros.Consensus.Block.Abstract">CodecConfig</a> blk))))</div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">class</span> (<a href="Ouroboros-Consensus-Storage-ChainDB-Serialisation.html#t:EncodeDisk" title="Ouroboros.Consensus.Storage.ChainDB.Serialisation">EncodeDisk</a> blk blk, <a href="Ouroboros-Consensus-Storage-ChainDB-Serialisation.html#t:DecodeDisk" title="Ouroboros.Consensus.Storage.ChainDB.Serialisation">DecodeDisk</a> blk (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> &#8594; blk), <a href="Ouroboros-Consensus-Storage-ChainDB-Serialisation.html#t:DecodeDiskDep" title="Ouroboros.Consensus.Storage.ChainDB.Serialisation">DecodeDiskDep</a> (<a href="Ouroboros-Consensus-Block-NestedContent.html#t:NestedCtxt" title="Ouroboros.Consensus.Block.NestedContent">NestedCtxt</a> <a href="Ouroboros-Consensus-Block-Abstract.html#t:Header" title="Ouroboros.Consensus.Block.Abstract">Header</a>) blk, <a href="Ouroboros-Consensus-Storage-ChainDB-Serialisation.html#t:ReconstructNestedCtxt" title="Ouroboros.Consensus.Storage.ChainDB.Serialisation">ReconstructNestedCtxt</a> <a href="Ouroboros-Consensus-Block-Abstract.html#t:Header" title="Ouroboros.Consensus.Block.Abstract">Header</a> blk, <a href="Ouroboros-Consensus-Storage-ChainDB-Serialisation.html#t:HasBinaryBlockInfo" title="Ouroboros.Consensus.Storage.ChainDB.Serialisation">HasBinaryBlockInfo</a> blk) &#8658; <a id="t:VolDbSerialiseConstraints" class="def">VolDbSerialiseConstraints</a> blk <a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html#VolDbSerialiseConstraints" class="link">Source</a> <a href="#t:VolDbSerialiseConstraints" class="selflink">#</a></p><div class="doc"><p><code><a href="Ouroboros-Consensus-Storage-ChainDB-Serialisation.html#t:EncodeDisk" title="Ouroboros.Consensus.Storage.ChainDB.Serialisation">EncodeDisk</a></code> and <code><a href="Ouroboros-Consensus-Storage-ChainDB-Serialisation.html#t:DecodeDisk" title="Ouroboros.Consensus.Storage.ChainDB.Serialisation">DecodeDisk</a></code> constraints needed for the VolDB.</p></div><div class="subs instances"><details id="i:VolDbSerialiseConstraints" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:VolDbSerialiseConstraints:VolDbSerialiseConstraints:1"></span> <a href="Ouroboros-Consensus-HardFork-Combinator-Serialisation-Common.html#t:SerialiseHFC" title="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common">SerialiseHFC</a> xs &#8658; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDbSerialiseConstraints" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDbSerialiseConstraints</a> (<a href="Ouroboros-Consensus-HardFork-Combinator-Basics.html#t:HardForkBlock" title="Ouroboros.Consensus.HardFork.Combinator.Basics">HardForkBlock</a> xs)</span> <a href="src/Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseDisk.html#line-26" class="link">Source</a> <a href="#t:VolDbSerialiseConstraints" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:VolDbSerialiseConstraints:VolDbSerialiseConstraints:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-HardFork-Combinator-Serialisation-SerialiseDisk.html">Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseDisk</a></p></details></td></tr></table></details></div></div><a href="#g:1" id="g:1"><h1>Initialization</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:VolDbArgs" class="def">VolDbArgs</a> m blk <a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html#VolDbArgs" class="link">Source</a> <a href="#t:VolDbArgs" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:VolDbArgs" class="def">VolDbArgs</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:volHasFS" class="def">volHasFS</a> &#8759; <a href="Ouroboros-Consensus-Storage-FS-API.html#t:SomeHasFS" title="Ouroboros.Consensus.Storage.FS.API">SomeHasFS</a> m</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:volCheckIntegrity" class="def">volCheckIntegrity</a> &#8759; blk &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:volBlocksPerFile" class="def">volBlocksPerFile</a> &#8759; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:BlocksPerFile" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">BlocksPerFile</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:volCodecConfig" class="def">volCodecConfig</a> &#8759; <a href="Ouroboros-Consensus-Block-Abstract.html#t:CodecConfig" title="Ouroboros.Consensus.Block.Abstract">CodecConfig</a> blk</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:volValidation" class="def">volValidation</a> &#8759; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:BlockValidationPolicy" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">BlockValidationPolicy</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:volTracer" class="def">volTracer</a> &#8759; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/contra-tracer-0.1.0.0/noopt/doc/html/contra-tracer/Control-Tracer.html#t:Tracer" title="Control.Tracer">Tracer</a> m (<a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:TraceEvent" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">TraceEvent</a> blk)</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:defaultArgs" class="def">defaultArgs</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> &#8594; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDbArgs" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDbArgs</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> blk <a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html#defaultArgs" class="link">Source</a> <a href="#v:defaultArgs" class="selflink">#</a></p><div class="doc"><p>Default arguments when using the <code><a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a></code> monad</p><p>The following fields must still be defined:</p><ul><li><code><a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#v:volCheckIntegrity" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">volCheckIntegrity</a></code></li><li><code><a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#v:volBlocksPerFile" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">volBlocksPerFile</a></code></li><li><code><a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#v:volCodecConfig" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">volCodecConfig</a></code></li><li><code><a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#v:volValidation" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">volValidation</a></code></li></ul></div></div><div class="top"><p class="src"><a id="v:openDB" class="def">openDB</a> &#8759; &#8704; m blk. (<a href="Ouroboros-Consensus-Util-IOLike.html#t:IOLike" title="Ouroboros.Consensus.Util.IOLike">IOLike</a> m, <a href="Ouroboros-Consensus-Block-Abstract.html#t:GetPrevHash" title="Ouroboros.Consensus.Block.Abstract">GetPrevHash</a> blk, <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDbSerialiseConstraints" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDbSerialiseConstraints</a> blk) &#8658; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDbArgs" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDbArgs</a> m blk &#8594; m (<a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk) <a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html#openDB" class="link">Source</a> <a href="#v:openDB" class="selflink">#</a></p></div><a href="#g:2" id="g:2"><h1>Candidates</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:LookupBlockInfo" class="def">LookupBlockInfo</a> blk = <a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> (<a href="Ouroboros-Consensus-Storage-VolatileDB-Types.html#t:BlockInfo" title="Ouroboros.Consensus.Storage.VolatileDB.Types">BlockInfo</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk)) <a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html#LookupBlockInfo" class="link">Source</a> <a href="#t:LookupBlockInfo" class="selflink">#</a></p><div class="doc"><p>Return the block info for the block with the given hash. Return <code><a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#v:Nothing" title="GHC.Maybe">Nothing</a></code>
 when not in the VolatileDB.</p></div></div><div class="top"><p class="src"><a id="v:candidates" class="def">candidates</a> <a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html#candidates" class="link">Source</a> <a href="#v:candidates" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">&#8759; (<a href="Ouroboros-Consensus-Block-Abstract.html#t:WithOrigin" title="Ouroboros.Consensus.Block.Abstract">WithOrigin</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk) &#8594; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:Set" title="Cardano.Prelude.Base">Set</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk))</td><td class="doc"><pre>filterByPredecessor</pre></td></tr><tr><td class="src">&#8594; <a href="Ouroboros-Consensus-Block-Abstract.html#t:Point" title="Ouroboros.Consensus.Block.Abstract">Point</a> blk</td><td class="doc"><pre>B</pre></td></tr><tr><td class="src">&#8594; [<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk)]</td><td class="doc"><p>Each element in the list is a list of hashes from which we can
 construct a fragment anchored at the point <code>B</code>.</p></td></tr></table></div><div class="doc"><p>Compute all candidates starting at the specified point</p><p>PRECONDITION: the block to which the given point corresponds is part of the
 VolatileDB.</p><p>The first element in each list of hashes is the hash <em>after</em> the specified
 hash. Thus, when building fragments from these lists of hashes, they
 fragments must be <em>anchored</em> at the specified hash, but not contain it.</p><p>NOTE: it is possible that no candidates are found, but don't forget that
 the chain (fragment) ending with <code>B</code> is also a potential candidate.</p></div></div><div class="top"><p class="src"><a id="v:extendWithSuccessors" class="def">extendWithSuccessors</a> &#8759; &#8704; blk. <a href="Ouroboros-Consensus-Block-Abstract.html#t:HasHeader" title="Ouroboros.Consensus.Block.Abstract">HasHeader</a> blk &#8658; (<a href="Ouroboros-Consensus-Block-Abstract.html#t:WithOrigin" title="Ouroboros.Consensus.Block.Abstract">WithOrigin</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk) &#8594; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:Set" title="Cardano.Prelude.Base">Set</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk)) &#8594; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:LookupBlockInfo" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">LookupBlockInfo</a> blk &#8594; <a href="Ouroboros-Consensus-Fragment-Diff.html#t:ChainDiff" title="Ouroboros.Consensus.Fragment.Diff">ChainDiff</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderFields" title="Ouroboros.Consensus.Block.Abstract">HeaderFields</a> blk) &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> (<a href="Ouroboros-Consensus-Fragment-Diff.html#t:ChainDiff" title="Ouroboros.Consensus.Fragment.Diff">ChainDiff</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderFields" title="Ouroboros.Consensus.Block.Abstract">HeaderFields</a> blk)) <a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html#extendWithSuccessors" class="link">Source</a> <a href="#v:extendWithSuccessors" class="selflink">#</a></p><div class="doc"><p>Extend the <code><a href="Ouroboros-Consensus-Fragment-Diff.html#t:ChainDiff" title="Ouroboros.Consensus.Fragment.Diff">ChainDiff</a></code> with the successors found by <code><a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#v:candidates" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">candidates</a></code>.</p><p>In case no successors were found, the original <code><a href="Ouroboros-Consensus-Fragment-Diff.html#t:ChainDiff" title="Ouroboros.Consensus.Fragment.Diff">ChainDiff</a></code> is returned as a
 singleton.</p><p>In case successors <em>were</em> found, the original <code><a href="Ouroboros-Consensus-Fragment-Diff.html#t:ChainDiff" title="Ouroboros.Consensus.Fragment.Diff">ChainDiff</a></code> is <em>not</em>
 included, only its extensions.</p><p>Only the longest possible extensions are returned, no intermediary prefixes
 of extensions.</p></div></div><div class="top"><p class="src"><a id="v:isReachable" class="def">isReachable</a> <a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html#isReachable" class="link">Source</a> <a href="#v:isReachable" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">&#8759; (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HasHeader" title="Ouroboros.Consensus.Block.Abstract">HasHeader</a> blk, <a href="Ouroboros-Consensus-Block-Abstract.html#t:GetHeader" title="Ouroboros.Consensus.Block.Abstract">GetHeader</a> blk, <a href="Ouroboros-Consensus-Util-CallStack.html#t:HasCallStack" title="Ouroboros.Consensus.Util.CallStack">HasCallStack</a>)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">&#8658; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:LookupBlockInfo" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">LookupBlockInfo</a> blk</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">&#8594; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-network-0.1.0.0/noopt/doc/html/ouroboros-network/Ouroboros-Network-AnchoredFragment.html#t:AnchoredFragment" title="Ouroboros.Network.AnchoredFragment">AnchoredFragment</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:Header" title="Ouroboros.Consensus.Block.Abstract">Header</a> blk)</td><td class="doc"><p>Chain fragment to connect the point to</p></td></tr><tr><td class="src">&#8594; <a href="Ouroboros-Consensus-Block-RealPoint.html#t:RealPoint" title="Ouroboros.Consensus.Block.RealPoint">RealPoint</a> blk</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">&#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> (<a href="Ouroboros-Consensus-Fragment-Diff.html#t:ChainDiff" title="Ouroboros.Consensus.Fragment.Diff">ChainDiff</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderFields" title="Ouroboros.Consensus.Block.Abstract">HeaderFields</a> blk))</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Try to connect the point <code>P</code> to the chain fragment by chasing the
 predecessors.</p><p>When successful, return a <code><a href="Ouroboros-Consensus-Fragment-Diff.html#t:ChainDiff" title="Ouroboros.Consensus.Fragment.Diff">ChainDiff</a></code>: the number of blocks to roll back
 the chain fragment to the intersection point and a fragment anchored at the
 intersection point containing the <code><a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderFields" title="Ouroboros.Consensus.Block.Abstract">HeaderFields</a></code> corresponding to the
 blocks needed to connect to <code>P</code>. The intersection point will be the most
 recent intersection point.</p><p>Returns <code><a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#v:Nothing" title="GHC.Maybe">Nothing</a></code> when <code>P</code> is not in the VolatileDB or when <code>P</code> is not
 connected to the given chain fragment.</p><p>POSTCONDITION: the returned number of blocks to roll back is less than or
 equal to the length of the given chain fragment.</p><p>Note that the number of returned points can be smaller than the number of
 blocks to roll back. This means <code>P</code> is on a fork shorter than the given
 chain fragment.</p><p>A <code><a href="Ouroboros-Consensus-Fragment-Diff.html#t:ChainDiff" title="Ouroboros.Consensus.Fragment.Diff">ChainDiff</a></code> is returned iff <code>P</code> is on the chain fragment. Moreover, when
 the number of blocks to roll back is also 0, it must be that <code>P</code> is the tip
 of the chain fragment.</p><p>When the suffix of the <code><a href="Ouroboros-Consensus-Fragment-Diff.html#t:ChainDiff" title="Ouroboros.Consensus.Fragment.Diff">ChainDiff</a></code> is non-empty, <code>P</code> will be the last point
 in the suffix.</p></div></div><a href="#g:3" id="g:3"><h1>Paths</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Path" class="def">Path</a> blk <a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html#Path" class="link">Source</a> <a href="#t:Path" class="selflink">#</a></p><div class="doc"><p>A path through the VolatileDB from a <code><a href="Ouroboros-Consensus-Storage-ChainDB-API.html#t:StreamFrom" title="Ouroboros.Consensus.Storage.ChainDB.API">StreamFrom</a></code> to a <code><a href="Ouroboros-Consensus-Storage-ChainDB-API.html#t:StreamTo" title="Ouroboros.Consensus.Storage.ChainDB.API">StreamTo</a></code>.</p><p>Invariant: the <code>ChainFragment</code> (oldest first) constructed using the blocks
 corresponding to the points in the path will be valid, i.e., the blocks
 will fit onto each other.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:NotInVolDB" class="def">NotInVolDB</a> (<a href="Ouroboros-Consensus-Block-RealPoint.html#t:RealPoint" title="Ouroboros.Consensus.Block.RealPoint">RealPoint</a> blk)</td><td class="doc"><p>The <code>end</code> point (<code><code><a href="Ouroboros-Consensus-Storage-ChainDB-API.html#v:StreamToInclusive" title="Ouroboros.Consensus.Storage.ChainDB.API">StreamToInclusive</a></code> end</code> or <code><code><a href="Ouroboros-Consensus-Storage-ChainDB-API.html#v:StreamToExclusive" title="Ouroboros.Consensus.Storage.ChainDB.API">StreamToExclusive</a></code>
 end</code>) was not part of the VolatileDB.</p></td></tr><tr><td class="src"><a id="v:CompletelyInVolDB" class="def">CompletelyInVolDB</a> [<a href="Ouroboros-Consensus-Block-RealPoint.html#t:RealPoint" title="Ouroboros.Consensus.Block.RealPoint">RealPoint</a> blk]</td><td class="doc"><p>A complete path, from start point to end point was constructed from
 the VolatileDB. The list contains the points from oldest to newest.</p><ul><li>If the lower bound was <code><code><a href="Ouroboros-Consensus-Storage-ChainDB-API.html#v:StreamFromInclusive" title="Ouroboros.Consensus.Storage.ChainDB.API">StreamFromInclusive</a></code> pt</code>, then <code>pt</code> will be
   the first element of the list.</li><li>If the lower bound was <code><code><a href="Ouroboros-Consensus-Storage-ChainDB-API.html#v:StreamFromExclusive" title="Ouroboros.Consensus.Storage.ChainDB.API">StreamFromExclusive</a></code> pt</code>, then the first
   element of the list will correspond to the first block after <code>pt</code>.</li><li>If the upper bound was <code><code><a href="Ouroboros-Consensus-Storage-ChainDB-API.html#v:StreamToInclusive" title="Ouroboros.Consensus.Storage.ChainDB.API">StreamToInclusive</a></code> pt</code>, then <code>pt</code> will be
   the last element of the list.</li><li>If the upper bound was <code><code><a href="Ouroboros-Consensus-Storage-ChainDB-API.html#v:StreamToExclusive" title="Ouroboros.Consensus.Storage.ChainDB.API">StreamToExclusive</a></code> pt</code>, then the last
   element of the list will correspond to the first block before <code>pt</code>.</li></ul></td></tr><tr><td class="src"><a id="v:PartiallyInVolDB" class="def">PartiallyInVolDB</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk) [<a href="Ouroboros-Consensus-Block-RealPoint.html#t:RealPoint" title="Ouroboros.Consensus.Block.RealPoint">RealPoint</a> blk]</td><td class="doc"><p>Only a partial path could be constructed from the VolatileDB. The
 missing predecessor could still be in the ImmutableDB. The list
 contains the points from oldest to newest.</p><ul><li>The first element in the list is the point for which no predecessor
   is available in the VolatileDB. The block corresponding to the point
   itself, <em>is</em> available in the VolatileDB.</li><li>The first argument is the hash of predecessor, the block that is not
   available in the VolatileDB.</li></ul><p>Note: if the lower bound is exclusive, the block corresponding to it
 doesn't have to be part of the VolatileDB, it will result in a
 <code>StartToEnd</code>.</p><p>The same invariants hold for the upper bound as for <code>StartToEnd</code>.</p></td></tr></table></div><div class="subs instances"><details id="i:Path" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Path:Eq:1"></span> <a href="Ouroboros-Consensus-Block-Abstract.html#t:HasHeader" title="Ouroboros.Consensus.Block.Abstract">HasHeader</a> blk &#8658; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> (<a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:Path" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">Path</a> blk)</span> <a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html#line-686" class="link">Source</a> <a href="#t:Path" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Path:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html">Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> &#8759; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:Path" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">Path</a> blk &#8594; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:Path" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">Path</a> blk &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> &#8759; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:Path" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">Path</a> blk &#8594; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:Path" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">Path</a> blk &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Path:Show:2"></span> <a href="Ouroboros-Consensus-Block-Abstract.html#t:HasHeader" title="Ouroboros.Consensus.Block.Abstract">HasHeader</a> blk &#8658; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:Path" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">Path</a> blk)</span> <a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html#line-687" class="link">Source</a> <a href="#t:Path" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Path:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html">Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> &#8594; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:Path" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">Path</a> blk &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> &#8759; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:Path" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">Path</a> blk &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> &#8759; [<a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:Path" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">Path</a> blk] &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:computePath" class="def">computePath</a> &#8759; &#8704; blk. <a href="Ouroboros-Consensus-Block-Abstract.html#t:HasHeader" title="Ouroboros.Consensus.Block.Abstract">HasHeader</a> blk &#8658; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:LookupBlockInfo" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">LookupBlockInfo</a> blk &#8594; <a href="Ouroboros-Consensus-Storage-ChainDB-API.html#t:StreamFrom" title="Ouroboros.Consensus.Storage.ChainDB.API">StreamFrom</a> blk &#8594; <a href="Ouroboros-Consensus-Storage-ChainDB-API.html#t:StreamTo" title="Ouroboros.Consensus.Storage.ChainDB.API">StreamTo</a> blk &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> (<a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:Path" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">Path</a> blk) <a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html#computePath" class="link">Source</a> <a href="#v:computePath" class="selflink">#</a></p><div class="doc"><p>Construct a path backwards through the VolatileDB.</p><p>We walk backwards through the VolatileDB, constructing a <code><a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:Path" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">Path</a></code> from the
 <code><a href="Ouroboros-Consensus-Storage-ChainDB-API.html#t:StreamTo" title="Ouroboros.Consensus.Storage.ChainDB.API">StreamTo</a></code> to the <code><a href="Ouroboros-Consensus-Storage-ChainDB-API.html#t:StreamFrom" title="Ouroboros.Consensus.Storage.ChainDB.API">StreamFrom</a></code>.</p><p>If the range is invalid, <code><a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#v:Nothing" title="GHC.Maybe">Nothing</a></code> is returned.</p><p>See the documentation of <code><a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:Path" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">Path</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:computePathSTM" class="def">computePathSTM</a> &#8759; &#8704; m blk. (<a href="Ouroboros-Consensus-Util-IOLike.html#t:IOLike" title="Ouroboros.Consensus.Util.IOLike">IOLike</a> m, <a href="Ouroboros-Consensus-Block-Abstract.html#t:HasHeader" title="Ouroboros.Consensus.Block.Abstract">HasHeader</a> blk) &#8658; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk &#8594; <a href="Ouroboros-Consensus-Storage-ChainDB-API.html#t:StreamFrom" title="Ouroboros.Consensus.Storage.ChainDB.API">StreamFrom</a> blk &#8594; <a href="Ouroboros-Consensus-Storage-ChainDB-API.html#t:StreamTo" title="Ouroboros.Consensus.Storage.ChainDB.API">StreamTo</a> blk &#8594; <a href="Ouroboros-Consensus-Util-MonadSTM-NormalForm.html#t:STM" title="Ouroboros.Consensus.Util.MonadSTM.NormalForm">STM</a> m (<a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:Path" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">Path</a> blk) <a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html#computePathSTM" class="link">Source</a> <a href="#v:computePathSTM" class="selflink">#</a></p><div class="doc"><p>Variant of <code><a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#v:computePath" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">computePath</a></code> that obtains its arguments in the same <code><a href="Ouroboros-Consensus-Util-MonadSTM-NormalForm.html#t:STM" title="Ouroboros.Consensus.Util.MonadSTM.NormalForm">STM</a></code>
 transaction. Throws an <code><a href="Ouroboros-Consensus-Storage-ChainDB-API.html#v:InvalidIteratorRange" title="Ouroboros.Consensus.Storage.ChainDB.API">InvalidIteratorRange</a></code> exception when the range is
 invalid (i.e., <code><a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#v:computePath" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">computePath</a></code> returned <code><a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#v:Nothing" title="GHC.Maybe">Nothing</a></code>).</p></div></div><a href="#g:4" id="g:4"><h1>Getting and parsing blocks</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:BlockFileParserError" class="def">BlockFileParserError</a> hash = <a href="Ouroboros-Consensus-Storage-VolatileDB-Types.html#t:ParserError" title="Ouroboros.Consensus.Storage.VolatileDB.Types">ParserError</a> hash <a href="Ouroboros-Consensus-Util-CBOR.html#t:ReadIncrementalErr" title="Ouroboros.Consensus.Util.CBOR">ReadIncrementalErr</a> <a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html#BlockFileParserError" class="link">Source</a> <a href="#t:BlockFileParserError" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getKnownBlock" class="def">getKnownBlock</a> &#8759; (<a href="Ouroboros-Consensus-Util-IOLike.html#t:MonadCatch" title="Ouroboros.Consensus.Util.IOLike">MonadCatch</a> m, <a href="Ouroboros-Consensus-Block-Abstract.html#t:HasHeader" title="Ouroboros.Consensus.Block.Abstract">HasHeader</a> blk, <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDbSerialiseConstraints" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDbSerialiseConstraints</a> blk) &#8658; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk &#8594; <a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk &#8594; m blk <a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html#getKnownBlock" class="link">Source</a> <a href="#v:getKnownBlock" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getKnownHeader" class="def">getKnownHeader</a> &#8759; (<a href="Ouroboros-Consensus-Util-IOLike.html#t:MonadCatch" title="Ouroboros.Consensus.Util.IOLike">MonadCatch</a> m, <a href="Ouroboros-Consensus-Block-Abstract.html#t:HasHeader" title="Ouroboros.Consensus.Block.Abstract">HasHeader</a> blk, <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDbSerialiseConstraints" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDbSerialiseConstraints</a> blk) &#8658; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk &#8594; <a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk &#8594; m (<a href="Ouroboros-Consensus-Block-Abstract.html#t:Header" title="Ouroboros.Consensus.Block.Abstract">Header</a> blk) <a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html#getKnownHeader" class="link">Source</a> <a href="#v:getKnownHeader" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getKnownBlockComponent" class="def">getKnownBlockComponent</a> &#8759; (<a href="Ouroboros-Consensus-Util-IOLike.html#t:MonadCatch" title="Ouroboros.Consensus.Util.IOLike">MonadCatch</a> m, <a href="Ouroboros-Consensus-Block-Abstract.html#t:HasHeader" title="Ouroboros.Consensus.Block.Abstract">HasHeader</a> blk, <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDbSerialiseConstraints" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDbSerialiseConstraints</a> blk) &#8658; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk &#8594; <a href="Ouroboros-Consensus-Storage-Common.html#t:BlockComponent" title="Ouroboros.Consensus.Storage.Common">BlockComponent</a> (<a href="Ouroboros-Consensus-Storage-ChainDB-API.html#t:ChainDB" title="Ouroboros.Consensus.Storage.ChainDB.API">ChainDB</a> m blk) b &#8594; <a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk &#8594; m b <a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html#getKnownBlockComponent" class="link">Source</a> <a href="#v:getKnownBlockComponent" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getBlockComponent" class="def">getBlockComponent</a> &#8759; &#8704; m blk b. (<a href="Ouroboros-Consensus-Util-IOLike.html#t:MonadCatch" title="Ouroboros.Consensus.Util.IOLike">MonadCatch</a> m, <a href="Ouroboros-Consensus-Block-Abstract.html#t:HasHeader" title="Ouroboros.Consensus.Block.Abstract">HasHeader</a> blk, <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDbSerialiseConstraints" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDbSerialiseConstraints</a> blk) &#8658; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk &#8594; <a href="Ouroboros-Consensus-Storage-Common.html#t:BlockComponent" title="Ouroboros.Consensus.Storage.Common">BlockComponent</a> (<a href="Ouroboros-Consensus-Storage-ChainDB-API.html#t:ChainDB" title="Ouroboros.Consensus.Storage.ChainDB.API">ChainDB</a> m blk) b &#8594; <a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk &#8594; m (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> b) <a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html#getBlockComponent" class="link">Source</a> <a href="#v:getBlockComponent" class="selflink">#</a></p></div><a href="#g:5" id="g:5"><h1>Wrappers</h1></a><div class="top"><p class="src"><a id="v:getBlockInfo" class="def">getBlockInfo</a> &#8759; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk &#8594; <a href="Ouroboros-Consensus-Util-MonadSTM-NormalForm.html#t:STM" title="Ouroboros.Consensus.Util.MonadSTM.NormalForm">STM</a> m (<a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:LookupBlockInfo" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">LookupBlockInfo</a> blk) <a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html#getBlockInfo" class="link">Source</a> <a href="#v:getBlockInfo" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getIsMember" class="def">getIsMember</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> (<a href="Ouroboros-Consensus-Util-MonadSTM-NormalForm.html#t:STM" title="Ouroboros.Consensus.Util.MonadSTM.NormalForm">STM</a> m) &#8658; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk &#8594; <a href="Ouroboros-Consensus-Util-MonadSTM-NormalForm.html#t:STM" title="Ouroboros.Consensus.Util.MonadSTM.NormalForm">STM</a> m (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) <a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html#getIsMember" class="link">Source</a> <a href="#v:getIsMember" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getPredecessor" class="def">getPredecessor</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> (<a href="Ouroboros-Consensus-Util-MonadSTM-NormalForm.html#t:STM" title="Ouroboros.Consensus.Util.MonadSTM.NormalForm">STM</a> m) &#8658; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk &#8594; <a href="Ouroboros-Consensus-Util-MonadSTM-NormalForm.html#t:STM" title="Ouroboros.Consensus.Util.MonadSTM.NormalForm">STM</a> m (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:WithOrigin" title="Ouroboros.Consensus.Block.Abstract">WithOrigin</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk))) <a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html#getPredecessor" class="link">Source</a> <a href="#v:getPredecessor" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:filterByPredecessor" class="def">filterByPredecessor</a> &#8759; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk &#8594; <a href="Ouroboros-Consensus-Util-MonadSTM-NormalForm.html#t:STM" title="Ouroboros.Consensus.Util.MonadSTM.NormalForm">STM</a> m (<a href="Ouroboros-Consensus-Block-Abstract.html#t:WithOrigin" title="Ouroboros.Consensus.Block.Abstract">WithOrigin</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk) &#8594; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:Set" title="Cardano.Prelude.Base">Set</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk)) <a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html#filterByPredecessor" class="link">Source</a> <a href="#v:filterByPredecessor" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getMaxSlotNo" class="def">getMaxSlotNo</a> &#8759; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk &#8594; <a href="Ouroboros-Consensus-Util-MonadSTM-NormalForm.html#t:STM" title="Ouroboros.Consensus.Util.MonadSTM.NormalForm">STM</a> m <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-network-0.1.0.0/noopt/doc/html/ouroboros-network/Ouroboros-Network-Block.html#t:MaxSlotNo" title="Ouroboros.Network.Block">MaxSlotNo</a> <a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html#getMaxSlotNo" class="link">Source</a> <a href="#v:getMaxSlotNo" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:putBlock" class="def">putBlock</a> &#8759; (<a href="Ouroboros-Consensus-Util-IOLike.html#t:MonadCatch" title="Ouroboros.Consensus.Util.IOLike">MonadCatch</a> m, <a href="Ouroboros-Consensus-Block-Abstract.html#t:GetPrevHash" title="Ouroboros.Consensus.Block.Abstract">GetPrevHash</a> blk, <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDbSerialiseConstraints" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDbSerialiseConstraints</a> blk) &#8658; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk &#8594; blk &#8594; m () <a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html#putBlock" class="link">Source</a> <a href="#v:putBlock" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:closeDB" class="def">closeDB</a> &#8759; (<a href="Ouroboros-Consensus-Util-IOLike.html#t:MonadCatch" title="Ouroboros.Consensus.Util.IOLike">MonadCatch</a> m, <a href="Ouroboros-Consensus-Util-CallStack.html#t:HasCallStack" title="Ouroboros.Consensus.Util.CallStack">HasCallStack</a>) &#8658; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk &#8594; m () <a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html#closeDB" class="link">Source</a> <a href="#v:closeDB" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:garbageCollect" class="def">garbageCollect</a> &#8759; <a href="Ouroboros-Consensus-Util-IOLike.html#t:MonadCatch" title="Ouroboros.Consensus.Util.IOLike">MonadCatch</a> m &#8658; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk &#8594; <a href="Ouroboros-Consensus-Block-Abstract.html#t:SlotNo" title="Ouroboros.Consensus.Block.Abstract">SlotNo</a> &#8594; m () <a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html#garbageCollect" class="link">Source</a> <a href="#v:garbageCollect" class="selflink">#</a></p></div><a href="#g:6" id="g:6"><h1>Tracing</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:TraceEvent" class="def">TraceEvent</a> blk = <a href="Ouroboros-Consensus-Storage-VolatileDB-Types.html#t:TraceEvent" title="Ouroboros.Consensus.Storage.VolatileDB.Types">TraceEvent</a> <a href="Ouroboros-Consensus-Util-CBOR.html#t:ReadIncrementalErr" title="Ouroboros.Consensus.Util.CBOR">ReadIncrementalErr</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk) <a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html#TraceEvent" class="link">Source</a> <a href="#t:TraceEvent" class="selflink">#</a></p><div class="doc"><p>Short-hand for events traced by the VolDB wrapper.</p></div></div><a href="#g:7" id="g:7"><h1>Re-exports</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:VolatileDBError" class="def">VolatileDBError</a> <a href="src/Ouroboros.Consensus.Storage.VolatileDB.Types.html#VolatileDBError" class="link">Source</a> <a href="#t:VolatileDBError" class="selflink">#</a></p><div class="doc"><p>Errors which might arise when working with this database.</p></div><div class="subs instances"><details id="i:VolatileDBError" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:VolatileDBError:Eq:1"></span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolatileDBError" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolatileDBError</a></span> <a href="src/Ouroboros.Consensus.Storage.VolatileDB.Types.html#line-95" class="link">Source</a> <a href="#t:VolatileDBError" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:VolatileDBError:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-VolatileDB-Types.html">Ouroboros.Consensus.Storage.VolatileDB.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> &#8759; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolatileDBError" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolatileDBError</a> &#8594; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolatileDBError" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolatileDBError</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> &#8759; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolatileDBError" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolatileDBError</a> &#8594; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolatileDBError" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolatileDBError</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:VolatileDBError:Show:2"></span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolatileDBError" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolatileDBError</a></span> <a href="src/Ouroboros.Consensus.Storage.VolatileDB.Types.html#line-81" class="link">Source</a> <a href="#t:VolatileDBError" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:VolatileDBError:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-VolatileDB-Types.html">Ouroboros.Consensus.Storage.VolatileDB.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> &#8594; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolatileDBError" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolatileDBError</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> &#8759; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolatileDBError" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolatileDBError</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> &#8759; [<a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolatileDBError" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolatileDBError</a>] &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:VolatileDBError:Exception:3"></span> <a href="Ouroboros-Consensus-Util-IOLike.html#t:Exception" title="Ouroboros.Consensus.Util.IOLike">Exception</a> <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolatileDBError" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolatileDBError</a></span> <a href="src/Ouroboros.Consensus.Storage.VolatileDB.Types.html#line-98" class="link">Source</a> <a href="#t:VolatileDBError" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:VolatileDBError:Exception:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-VolatileDB-Types.html">Ouroboros.Consensus.Storage.VolatileDB.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toException">toException</a> &#8759; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolatileDBError" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolatileDBError</a> &#8594; <a href="Ouroboros-Consensus-Util-IOLike.html#t:SomeException" title="Ouroboros.Consensus.Util.IOLike">SomeException</a> <a href="#v:toException" class="selflink">#</a></p><p class="src"><a href="#v:fromException">fromException</a> &#8759; <a href="Ouroboros-Consensus-Util-IOLike.html#t:SomeException" title="Ouroboros.Consensus.Util.IOLike">SomeException</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolatileDBError" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolatileDBError</a> <a href="#v:fromException" class="selflink">#</a></p><p class="src"><a href="#v:displayException">displayException</a> &#8759; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolatileDBError" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolatileDBError</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:displayException" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:BlockValidationPolicy" class="def">BlockValidationPolicy</a> <a href="src/Ouroboros.Consensus.Storage.VolatileDB.Types.html#BlockValidationPolicy" class="link">Source</a> <a href="#t:BlockValidationPolicy" class="selflink">#</a></p><div class="doc"><p>When block validation is enabled, the parser checks for each block a number
 of properties and stops parsing if it finds any invalid blocks.</p></div><div class="subs instances"><details id="i:BlockValidationPolicy" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:BlockValidationPolicy:Eq:1"></span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:BlockValidationPolicy" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">BlockValidationPolicy</a></span> <a href="src/Ouroboros.Consensus.Storage.VolatileDB.Types.html#line-71" class="link">Source</a> <a href="#t:BlockValidationPolicy" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:BlockValidationPolicy:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-VolatileDB-Types.html">Ouroboros.Consensus.Storage.VolatileDB.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> &#8759; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:BlockValidationPolicy" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">BlockValidationPolicy</a> &#8594; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:BlockValidationPolicy" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">BlockValidationPolicy</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> &#8759; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:BlockValidationPolicy" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">BlockValidationPolicy</a> &#8594; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:BlockValidationPolicy" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">BlockValidationPolicy</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:BlocksPerFile" class="def">BlocksPerFile</a> <a href="src/Ouroboros.Consensus.Storage.VolatileDB.Types.html#BlocksPerFile" class="link">Source</a> <a href="#t:BlocksPerFile" class="selflink">#</a></p><div class="doc"><p>The maximum number of blocks to store per file.</p></div><div class="subs instances"><details id="i:BlocksPerFile" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:BlocksPerFile:Show:1"></span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:BlocksPerFile" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">BlocksPerFile</a></span> <a href="src/Ouroboros.Consensus.Storage.VolatileDB.Types.html#line-44" class="link">Source</a> <a href="#t:BlocksPerFile" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:BlocksPerFile:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-VolatileDB-Types.html">Ouroboros.Consensus.Storage.VolatileDB.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> &#8594; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:BlocksPerFile" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">BlocksPerFile</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> &#8759; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:BlocksPerFile" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">BlocksPerFile</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> &#8759; [<a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:BlocksPerFile" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">BlocksPerFile</a>] &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:BlocksPerFile:Generic:2"></span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Generic" title="GHC.Generics">Generic</a> <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:BlocksPerFile" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">BlocksPerFile</a></span> <a href="src/Ouroboros.Consensus.Storage.VolatileDB.Types.html#line-44" class="link">Source</a> <a href="#t:BlocksPerFile" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:BlocksPerFile:Generic:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-VolatileDB-Types.html">Ouroboros.Consensus.Storage.VolatileDB.Types</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:BlocksPerFile" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">BlocksPerFile</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> <a href="#t:Rep" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:from">from</a> &#8759; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:BlocksPerFile" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">BlocksPerFile</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:BlocksPerFile" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">BlocksPerFile</a> x <a href="#v:from" class="selflink">#</a></p><p class="src"><a href="#v:to">to</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:BlocksPerFile" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">BlocksPerFile</a> x &#8594; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:BlocksPerFile" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">BlocksPerFile</a> <a href="#v:to" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:BlocksPerFile:Rep:3"></span> <span class="keyword">type</span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:BlocksPerFile" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">BlocksPerFile</a></span> <a href="src/Ouroboros.Consensus.Storage.VolatileDB.Types.html#line-44" class="link">Source</a> <a href="#t:BlocksPerFile" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:BlocksPerFile:Rep:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-VolatileDB-Types.html">Ouroboros.Consensus.Storage.VolatileDB.Types</a></p> <div class="src"><span class="keyword">type</span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:BlocksPerFile" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">BlocksPerFile</a> = <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:D1" title="GHC.Generics">D1</a> (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:MetaData" title="GHC.Generics">MetaData</a> &quot;BlocksPerFile&quot; &quot;Ouroboros.Consensus.Storage.VolatileDB.Types&quot; &quot;ouroboros-consensus-0.1.0.0-inplace&quot; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#v:True" title="Data.Bool">True</a>) (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:C1" title="GHC.Generics">C1</a> (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:MetaCons" title="GHC.Generics">MetaCons</a> &quot;BlocksPerFile&quot; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:PrefixI" title="GHC.Generics">PrefixI</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#v:True" title="Data.Bool">True</a>) (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#v:Just" title="GHC.Maybe">Just</a> &quot;unBlocksPerFile&quot;) <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:NoSourceStrictness" title="GHC.Generics">NoSourceStrictness</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#v:DecidedLazy" title="GHC.Generics">DecidedLazy</a>) (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Word.html#t:Word32" title="Data.Word">Word32</a>)))</div></details></td></tr></table></details></div></div><a href="#g:8" id="g:8"><h1>Exported for testing purposes</h1></a><div class="top"><p class="src"><a id="v:mkVolDB" class="def">mkVolDB</a> &#8759; <a href="Ouroboros-Consensus-Storage-VolatileDB-API.html#t:VolatileDB" title="Ouroboros.Consensus.Storage.VolatileDB.API">VolatileDB</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk) m &#8594; <a href="Ouroboros-Consensus-Block-Abstract.html#t:CodecConfig" title="Ouroboros.Consensus.Block.Abstract">CodecConfig</a> blk &#8594; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:VolDB" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">VolDB</a> m blk <a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html#mkVolDB" class="link">Source</a> <a href="#v:mkVolDB" class="selflink">#</a></p><div class="doc"><p>For testing purposes</p></div></div><div class="top"><p class="src"><a id="v:blockFileParser-39-" class="def">blockFileParser'</a> &#8759; &#8704; m blk h. (<a href="Ouroboros-Consensus-Util-IOLike.html#t:IOLike" title="Ouroboros.Consensus.Util.IOLike">IOLike</a> m, <a href="Ouroboros-Consensus-Block-Abstract.html#t:GetPrevHash" title="Ouroboros.Consensus.Block.Abstract">GetPrevHash</a> blk, <a href="Ouroboros-Consensus-Storage-ChainDB-Serialisation.html#t:HasBinaryBlockInfo" title="Ouroboros.Consensus.Storage.ChainDB.Serialisation">HasBinaryBlockInfo</a> blk) &#8658; <a href="Ouroboros-Consensus-Block-Abstract.html#t:CodecConfig" title="Ouroboros.Consensus.Block.Abstract">CodecConfig</a> blk &#8594; <a href="Ouroboros-Consensus-Storage-FS-API.html#t:HasFS" title="Ouroboros.Consensus.Storage.FS.API">HasFS</a> m h &#8594; (&#8704; s. Decoder s (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> &#8594; (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString-Short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a>, blk))) &#8594; (blk &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) &#8594; <a href="Ouroboros-Consensus-Storage-ChainDB-Impl-VolDB.html#t:BlockValidationPolicy" title="Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB">BlockValidationPolicy</a> &#8594; <a href="Ouroboros-Consensus-Storage-VolatileDB-Types.html#t:Parser" title="Ouroboros.Consensus.Storage.VolatileDB.Types">Parser</a> <a href="Ouroboros-Consensus-Util-CBOR.html#t:ReadIncrementalErr" title="Ouroboros.Consensus.Util.CBOR">ReadIncrementalErr</a> m (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk) <a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html#blockFileParser%27" class="link">Source</a> <a href="#v:blockFileParser-39-" class="selflink">#</a></p><div class="doc"><p>A version which is easier to use for tests, since it does not require
 the whole <code>VolDbArgs</code>.</p></div></div><div class="top"><p class="src"><a id="v:fromChainHash" class="def">fromChainHash</a> &#8759; <a href="Ouroboros-Consensus-Block-Abstract.html#t:ChainHash" title="Ouroboros.Consensus.Block.Abstract">ChainHash</a> blk &#8594; <a href="Ouroboros-Consensus-Block-Abstract.html#t:WithOrigin" title="Ouroboros.Consensus.Block.Abstract">WithOrigin</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> blk) <a href="src/Ouroboros.Consensus.Storage.ChainDB.Impl.VolDB.html#fromChainHash" class="link">Source</a> <a href="#v:fromChainHash" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>